"use strict";(self.webpackChunkdepositodwfront=self.webpackChunkdepositodwfront||[]).push([[127],{5127:(r,o,e)=>{e.r(o),e.d(o,{AdminPage:()=>W});var t=e(5043),s=e(3216),a=e(6240),i=e(344),n=e(6446),c=e(8903),l=e(5865),d=e(3845),h=e(1906),x=e(1637),p=e(7254),m=e(4669),u=e(4056),v=e(9662),A=e(579);const b=(0,v.A)((0,A.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People");var g=e(8970);const j=(0,v.A)((0,A.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),y=(0,v.A)((0,A.jsx)("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Business");var f=e(141),w=e(8137),S=e(1088),k=e(8816);const C={NODE_ENV:"production",PUBLIC_URL:"/depositoDW_v2",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"https://derwill-deposito-backend.onrender.com",z={async createDefaultUsers(){try{const r=await fetch("".concat(C,"/users/create-default"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!r.ok)throw new Error("Error ".concat(r.status,": ").concat(r.statusText));return await r.json()}catch(r){throw console.error("Error creando usuarios por defecto:",r),r}},async getUsers(){try{const r=await fetch("".concat(C,"/users"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!r.ok)throw new Error("Error ".concat(r.status,": ").concat(r.statusText));return await r.json()}catch(r){throw console.error("Error obteniendo usuarios:",r),r}},async createUser(r){try{const o=await fetch("".concat(C,"/users"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(r)});if(!o.ok)throw new Error("Error ".concat(o.status,": ").concat(o.statusText));return await o.json()}catch(o){throw console.error("Error creando usuario:",o),o}},async updateUser(r,o){try{const e=await fetch("".concat(C,"/users/").concat(r),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(o)});if(!e.ok)throw new Error("Error ".concat(e.status,": ").concat(e.statusText));return await e.json()}catch(e){throw console.error("Error actualizando usuario:",e),e}},async deleteUser(r){try{const o=await fetch("".concat(C,"/users/").concat(r),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!o.ok)throw new Error("Error ".concat(o.status,": ").concat(o.statusText));return await o.json()}catch(o){throw console.error("Error eliminando usuario:",o),o}}},W=()=>{const[r,o]=(0,t.useState)(null),[e,v]=(0,t.useState)("dashboard"),[C,W]=(0,t.useState)(!1),[T,E]=(0,t.useState)(null),D=(0,a.A)(),U=(0,i.A)(D.breakpoints.down("sm")),H=(0,i.A)(D.breakpoints.down("md"));(0,t.useEffect)((()=>{const r=k.y.getUser();o(r)}),[]);(0,s.Zp)();const _=async()=>{W(!0),E(null);try{const r=await z.createDefaultUsers();E(r)}catch(r){E({message:"Error creando usuarios",error:r.message})}finally{W(!1)}};return r?(0,A.jsx)(w.A,{user:r,onLogout:()=>{k.y.logout(),window.location.href="/depositoDW_v2/"},children:(0,A.jsxs)(n.A,{sx:{p:U?2:4},children:[(0,A.jsxs)(n.A,{sx:{mb:U?2:4},children:[(0,A.jsx)(l.A,{variant:U?"h5":H?"h4":"h3",sx:{fontWeight:700,color:"var(--color-text-primary)",mb:.5},children:"Administraci\xf3n"}),(0,A.jsx)(l.A,{variant:"body2",sx:{color:"var(--color-text-secondary)",mb:U?1:3},children:"Gestiona usuarios, configuraci\xf3n y reportes"})]}),(0,A.jsx)(n.A,{sx:{borderBottom:1,borderColor:"var(--color-border)",mb:U?2:3},children:(0,A.jsxs)(m.A,{value:e,onChange:(r,o)=>{v(o)},variant:U?"scrollable":"standard",scrollButtons:!!U&&"auto",sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600,minWidth:U?80:160,fontSize:U?"0.75rem":"0.875rem"},"& .Mui-selected":{color:"var(--color-primary)"},"& .MuiTabs-indicator":{backgroundColor:"var(--color-primary)"}},children:[(0,A.jsx)(u.A,{label:"Dashboard",value:"dashboard"}),(0,A.jsx)(u.A,{label:"Usuarios",value:"users"}),(0,A.jsx)(u.A,{label:"Sistema",value:"system"}),(0,A.jsx)(u.A,{label:"Reportes",value:"reports"})]})}),(0,A.jsxs)(n.A,{children:["dashboard"===e&&(0,A.jsxs)(n.A,{children:[(0,A.jsxs)(c.Ay,{container:!0,spacing:U?2:3,sx:{mb:U?3:4},children:[(0,A.jsx)(c.Ay,{item:!0,xs:6,sm:6,md:3,children:(0,A.jsx)(S.A,{title:"Usuarios",subtitle:"Total registrados",sx:{height:"100%"},padding:U?"compact":"normal",children:(0,A.jsxs)(n.A,{sx:{textAlign:"center",py:U?1:2},children:[(0,A.jsx)(b,{sx:{fontSize:U?32:48,color:"var(--color-primary)",mb:U?1:2}}),(0,A.jsx)(l.A,{variant:U?"h4":"h3",sx:{fontWeight:700,color:"var(--color-primary)"},children:"24"})]})})}),(0,A.jsx)(c.Ay,{item:!0,xs:6,sm:6,md:3,children:(0,A.jsx)(S.A,{title:"Art\xedculos",subtitle:"En stock",sx:{height:"100%"},padding:U?"compact":"normal",children:(0,A.jsxs)(n.A,{sx:{textAlign:"center",py:U?1:2},children:[(0,A.jsx)(g.A,{sx:{fontSize:U?32:48,color:"var(--color-secondary)",mb:U?1:2}}),(0,A.jsx)(l.A,{variant:U?"h4":"h3",sx:{fontWeight:700,color:"var(--color-secondary)"},children:"1,247"})]})})}),(0,A.jsx)(c.Ay,{item:!0,xs:6,sm:6,md:3,children:(0,A.jsx)(S.A,{title:"Movimientos",subtitle:"Hoy",sx:{height:"100%"},padding:U?"compact":"normal",children:(0,A.jsxs)(n.A,{sx:{textAlign:"center",py:U?1:2},children:[(0,A.jsx)(j,{sx:{fontSize:U?32:48,color:"var(--color-success)",mb:U?1:2}}),(0,A.jsx)(l.A,{variant:U?"h4":"h3",sx:{fontWeight:700,color:"var(--color-success)"},children:"89"})]})})}),(0,A.jsx)(c.Ay,{item:!0,xs:6,sm:6,md:3,children:(0,A.jsx)(S.A,{title:"Proveedores",subtitle:"Activos",sx:{height:"100%"},padding:U?"compact":"normal",children:(0,A.jsxs)(n.A,{sx:{textAlign:"center",py:U?1:2},children:[(0,A.jsx)(y,{sx:{fontSize:U?32:48,color:"var(--color-warning)",mb:U?1:2}}),(0,A.jsx)(l.A,{variant:U?"h4":"h3",sx:{fontWeight:700,color:"var(--color-warning)"},children:"12"})]})})})]}),(0,A.jsx)(S.A,{title:U?"Actividad":"Actividad Reciente",subtitle:U?"":"\xdaltimas actividades del sistema",padding:U?"compact":"normal",children:(0,A.jsx)(n.A,{sx:{mt:U?1:2},children:[{time:"10:30",text:"Nuevo usuario registrado: Juan P\xe9rez",type:"user"},{time:"09:15",text:"Movimiento de stock: Entrada de 50 unidades",type:"stock"},{time:"08:45",text:"Nuevo proveedor agregado: TextilCorp S.A.",type:"provider"},{time:"08:30",text:"Correcci\xf3n de inventario: Posici\xf3n A1-B2",type:"correction"},{time:"08:15",text:"Movimiento interno: Transferencia entre posiciones",type:"transfer"}].map(((r,o)=>(0,A.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",py:U?1:2,borderBottom:o<4?"1px solid var(--color-divider)":"none","&:last-child":{borderBottom:"none"}},children:[(0,A.jsx)(d.A,{label:r.time,size:"small",sx:{mr:U?1:2,backgroundColor:"var(--color-divider)",color:"var(--color-text-secondary)",fontSize:U?"0.7rem":"0.75rem"}}),(0,A.jsx)(l.A,{variant:U?"caption":"body2",sx:{color:"var(--color-text-primary)",lineHeight:U?1.2:1.4},children:r.text})]},o)))})})]}),"users"===e&&(0,A.jsxs)(S.A,{title:U?"Usuarios":"Gesti\xf3n de Usuarios",subtitle:U?"":"Administra los usuarios del sistema",padding:U?"compact":"normal",children:[(0,A.jsxs)(n.A,{sx:{mb:U?2:3},children:[(0,A.jsx)(l.A,{variant:U?"body2":"h6",sx:{mb:U?1:2},children:"Crear Usuarios por Defecto"}),(0,A.jsx)(l.A,{variant:"body2",sx:{color:"var(--color-text-secondary)",mb:U?2:3},children:"Crea los usuarios b\xe1sicos del sistema con roles espec\xedficos."}),(0,A.jsx)(h.A,{variant:"contained",startIcon:C?(0,A.jsx)(x.A,{size:20}):(0,A.jsx)(f.A,{}),onClick:_,disabled:C,size:U?"small":"medium",sx:{backgroundColor:"var(--color-primary)","&:hover":{backgroundColor:"var(--color-primary-dark)"}},children:C?"Creando...":"Crear Usuarios"})]}),T&&(0,A.jsxs)(p.A,{severity:T.error?"error":"success",sx:{mb:3},children:[T.message,T.error&&(0,A.jsxs)(l.A,{variant:"body2",sx:{mt:1},children:["Error: ",T.error]})]})]}),"system"===e&&(0,A.jsx)(S.A,{title:U?"Sistema":"Configuraci\xf3n del Sistema",subtitle:U?"":"Ajusta la configuraci\xf3n general del sistema",padding:U?"compact":"normal",children:(0,A.jsx)(l.A,{variant:"body2",sx:{color:"var(--color-text-secondary)"},children:"Configuraci\xf3n del sistema en desarrollo..."})}),"reports"===e&&(0,A.jsx)(S.A,{title:U?"Reportes":"Reportes y Estad\xedsticas",subtitle:U?"":"Genera reportes detallados del sistema",padding:U?"compact":"normal",children:(0,A.jsx)(l.A,{variant:"body2",sx:{color:"var(--color-text-secondary)"},children:"M\xf3dulo de reportes en desarrollo..."})})]})]})}):null}},8137:(r,o,e)=>{e.d(o,{A:()=>_});var t=e(5043),s=e(6240),a=e(344),i=e(6446),n=e(5865),c=e(1045),l=e(3845),d=e(469),h=e(5721),x=e(681),p=e(8968),m=e(2050),u=e(8734),v=e(9336),A=e(2314),b=e(5263),g=e(7392),j=e(4109),y=e(8970),f=e(9010),w=e(8606),S=e(3010),k=e(8602),C=e(5846),z=e(2069),W=e(9906),T=e(3287),E=e(3216);const D=r=>{switch(r){case"admin":return"error";case"gerente":return"warning";case"supervisor":return"info";case"operador":return"success";default:return"default"}},U=r=>{switch(r){case"admin":return"Administrador";case"gerente":return"Gerente";case"supervisor":return"Supervisor";case"operador":return"Operador";default:return r}};var H=e(579);const _=r=>{var o,e;let{children:_,user:R,onLogout:P,pageTitle:M}=r;const[O,I]=(0,t.useState)(!1),B=(0,s.A)(),V=(0,a.A)(B.breakpoints.down("md")),G=(0,E.Zp)(),L=(0,E.zy)(),N=()=>{I(!O)},J=[{section:"Operaciones",items:[{label:"Dep\xf3sito",path:"/depositoDW_v2/deposito",icon:(0,H.jsx)(y.A,{}),show:!0},{label:"Compras",path:"/depositoDW_v2/compras",icon:(0,H.jsx)(f.A,{}),show:"admin"===(null===R||void 0===R?void 0:R.role)},{label:"Calidad",path:"/depositoDW_v2/calidad",icon:(0,H.jsx)(w.A,{}),show:"admin"===(null===R||void 0===R?void 0:R.role)},{label:"Salida",path:"/depositoDW_v2/salida",icon:(0,H.jsx)(S.A,{}),show:"admin"===(null===R||void 0===R?void 0:R.role)}]},{section:"Administraci\xf3n",items:[{label:"Dashboard",path:"/depositoDW_v2/admin",icon:(0,H.jsx)(k.A,{}),show:"admin"===(null===R||void 0===R?void 0:R.role)},{label:"Reportes",path:"/depositoDW_v2/reportes",icon:(0,H.jsx)(C.A,{}),show:"admin"===(null===R||void 0===R?void 0:R.role)}]}],K=r=>L.pathname===r,F=(0,H.jsxs)(i.A,{sx:{width:280,height:"100%",display:"flex",flexDirection:"column",backgroundColor:"var(--color-surface)"},children:[(0,H.jsxs)(i.A,{sx:{p:3,background:"linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%)",color:"white",textAlign:"center",position:"relative",overflow:"hidden"},children:[(0,H.jsx)(i.A,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.1)",zIndex:0}}),(0,H.jsxs)(i.A,{sx:{position:"relative",zIndex:1},children:[(0,H.jsx)(n.A,{variant:"h5",sx:{fontWeight:700,mb:.5,textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"Der Will"}),(0,H.jsx)(n.A,{variant:"body2",sx:{opacity:.9,fontWeight:500},children:"Sistema de Gesti\xf3n"})]})]}),(0,H.jsx)(i.A,{sx:{p:3,pb:2},children:(0,H.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:2,p:2.5,backgroundColor:"var(--color-background)",borderRadius:"var(--border-radius-lg)",border:"1px solid var(--color-border)",boxShadow:"var(--shadow-sm)"},children:[(0,H.jsx)(c.A,{sx:{bgcolor:"var(--color-primary)",width:48,height:48,fontSize:"1.2rem",fontWeight:600},children:(null===R||void 0===R||null===(o=R.name)||void 0===o||null===(e=o.charAt(0))||void 0===e?void 0:e.toUpperCase())||"U"}),(0,H.jsxs)(i.A,{sx:{flex:1,minWidth:0},children:[(0,H.jsx)(n.A,{variant:"body1",sx:{fontWeight:600,color:"var(--color-text-primary)",mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(null===R||void 0===R?void 0:R.name)||"Usuario"}),(0,H.jsx)(l.A,{label:U(null===R||void 0===R?void 0:R.role),color:D(null===R||void 0===R?void 0:R.role),size:"small",sx:{fontWeight:500,"& .MuiChip-label":{px:1}}})]})]})}),(0,H.jsx)(i.A,{sx:{flex:1,overflow:"auto"},children:J.map(((r,o)=>(0,H.jsxs)(i.A,{children:[(0,H.jsx)(d.A,{sx:{px:3,py:1.5,backgroundColor:"transparent",color:"var(--color-text-secondary)",fontWeight:600,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:r.section}),(0,H.jsx)(h.A,{sx:{p:0},children:r.items.filter((r=>r.show)).map((r=>(0,H.jsx)(x.Ay,{sx:{p:0,px:1.5},children:(0,H.jsxs)(p.A,{onClick:()=>{return o=r.path,G(o),void(V&&I(!1));var o},sx:{borderRadius:"var(--border-radius-md)",mx:.5,mb:.5,backgroundColor:K(r.path)?"var(--color-primary)":"transparent",color:K(r.path)?"white":"var(--color-text-primary)","&:hover":{backgroundColor:K(r.path)?"var(--color-primary-dark)":"var(--color-divider)"},transition:"var(--transition-normal)"},children:[(0,H.jsx)(m.A,{sx:{color:K(r.path)?"white":"var(--color-text-secondary)",minWidth:40},children:r.icon}),(0,H.jsx)(u.A,{primary:r.label,primaryTypographyProps:{sx:{fontWeight:K(r.path)?600:500,fontSize:"0.9rem"}}})]})},r.path)))}),o<J.length-1&&(0,H.jsx)(v.A,{sx:{my:1,mx:3}})]},r.section)))}),(0,H.jsxs)(i.A,{sx:{p:2,pt:0},children:[(0,H.jsx)(v.A,{sx:{mb:2}}),(0,H.jsxs)(h.A,{sx:{p:0},children:[(0,H.jsx)(x.Ay,{sx:{p:0},children:(0,H.jsxs)(p.A,{sx:{borderRadius:"var(--border-radius-md)",mx:.5,mb:1,"&:hover":{backgroundColor:"var(--color-divider)"}},children:[(0,H.jsx)(m.A,{sx:{color:"var(--color-text-secondary)",minWidth:40},children:(0,H.jsx)(z.A,{})}),(0,H.jsx)(u.A,{primary:"Configuraci\xf3n",primaryTypographyProps:{sx:{fontWeight:500,fontSize:"0.9rem"}}})]})}),(0,H.jsx)(x.Ay,{sx:{p:0},children:(0,H.jsxs)(p.A,{onClick:()=>{P(),V&&I(!1)},sx:{borderRadius:"var(--border-radius-md)",mx:.5,backgroundColor:"rgba(244, 67, 54, 0.1)",color:"var(--color-error)","&:hover":{backgroundColor:"var(--color-error)",color:"white"},transition:"var(--transition-normal)"},children:[(0,H.jsx)(m.A,{sx:{color:"inherit",minWidth:40},children:(0,H.jsx)(W.A,{})}),(0,H.jsx)(u.A,{primary:"Cerrar Sesi\xf3n",primaryTypographyProps:{sx:{fontWeight:600,fontSize:"0.9rem"}}})]})})]})]})]});return(0,H.jsxs)(i.A,{sx:{display:"flex",minHeight:"100vh"},children:[V&&(0,H.jsx)(A.A,{position:"fixed",sx:{background:"linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%)",zIndex:B.zIndex.drawer+1,boxShadow:"var(--shadow-md)"},children:(0,H.jsxs)(b.A,{children:[(0,H.jsx)(g.A,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:N,sx:{mr:2},children:(0,H.jsx)(T.A,{})}),(0,H.jsx)(n.A,{variant:"h6",sx:{flexGrow:1,fontWeight:600},children:(()=>{if(M)return M;const r=L.pathname;return r.includes("/deposito")?"Dep\xf3sito":r.includes("/compras")?"Compras":r.includes("/calidad")?"Calidad":r.includes("/salida")?"Salida":r.includes("/admin")?"Dashboard":r.includes("/reportes")?"Reportes":"Der Will"})()})]})}),!V&&(0,H.jsx)(i.A,{component:"nav",sx:{width:280,flexShrink:0,backgroundColor:"var(--color-surface)",borderRight:"1px solid var(--color-border)",boxShadow:"var(--shadow-sm)"},children:F}),V&&(0,H.jsx)(j.Ay,{variant:"temporary",open:O,onClose:N,ModalProps:{keepMounted:!0},sx:{display:{xs:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:280,backgroundColor:"var(--color-surface)",border:"none"}},children:F}),(0,H.jsx)(i.A,{component:"main",sx:{flexGrow:1,backgroundColor:"var(--color-background)",minHeight:"100vh",pt:V?"64px":0},children:_})]})}},1088:(r,o,e)=>{e.d(o,{A:()=>x});e(5043);var t=e(6240),s=e(344),a=e(2110),i=e(9958),n=e(5865),c=e(6494),l=e(6446),d=e(7600),h=e(579);const x=r=>{let{title:o,subtitle:e,children:x,actions:p,elevation:m=1,padding:u="normal",headerAction:v,className:A,...b}=r;const g=(0,t.A)(),j=(0,s.A)(g.breakpoints.down("sm"));(0,s.A)(g.breakpoints.down("md"));return(0,h.jsxs)(a.A,{elevation:m,sx:{backgroundColor:"var(--color-surface)",borderRadius:"var(--border-radius-lg)",border:"1px solid var(--color-border)",transition:"var(--transition-normal)",width:"100%",maxWidth:"100%","&:hover":{boxShadow:"var(--shadow-md)",transform:"translateY(-2px)"},...b.sx},className:A,...b,children:[(o||e)&&(0,h.jsx)(i.A,{title:(0,h.jsx)(n.A,{variant:j?"h6":"h5",sx:{fontWeight:600,color:"var(--color-text-primary)",mb:e?.5:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o}),subheader:e&&(0,h.jsx)(n.A,{variant:"body2",sx:{color:"var(--color-text-secondary)",lineHeight:1.4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e}),action:v,sx:{pb:1,"& .MuiCardHeader-content":{minWidth:0},"& .MuiCardHeader-action":{flexShrink:0}}}),(0,h.jsx)(c.A,{sx:{...(()=>{switch(u){case"compact":return{p:2};case"comfortable":return{p:4};case"none":return{p:0};default:return{p:3}}})(),pt:o||e?0:void 0,width:"100%",maxWidth:"100%"},children:(0,h.jsx)(l.A,{sx:{width:"100%",maxWidth:"100%"},children:x})}),p&&(0,h.jsx)(d.A,{sx:{p:3,pt:0,gap:1,flexWrap:"wrap",width:"100%",maxWidth:"100%"},children:p})]})}},141:(r,o,e)=>{e.d(o,{A:()=>a});var t=e(9662),s=e(579);const a=(0,t.A)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")}}]);
//# sourceMappingURL=127.8f8410e4.chunk.js.map