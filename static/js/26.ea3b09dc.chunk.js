"use strict";(self.webpackChunkdepositodwfront=self.webpackChunkdepositodwfront||[]).push([[26],{7518:(e,r,o)=>{o.d(r,{BN:()=>s,LP:()=>i,UU:()=>a,Vx:()=>n,eG:()=>t});const t={STOCK:"Buscar por categor\xeda, descripci\xf3n, partida o proveedor (ej: nylon 16/1 negro rontaltex)...",DEPOSITO:"Buscar por posici\xf3n, material, categor\xeda o proveedor..."},a={LOADING:"Cargando materiales...",LOADING_POSICIONES:"Cargando posiciones...",RETRY:"Reintentar"},n={TOTAL_KILOS:"Total Kilos:",TOTAL_UNIDADES:"Total Unidades:",MATERIALES:"Materiales:",PARTIDAS:"Partidas:"},i={KILOS:0,UNIDADES:0,DECIMAL_PLACES:2},s={RACK:{MIN:1,MAX:20,LABEL:"Rack"},FILA:{MIN:1,MAX:14,LABEL:"Fila"},AB:{OPTIONS:["A","B"],LABEL:"A/B"},PASILLO:{MIN:1,MAX:11,LABEL:"Pasillo"}}},5655:(e,r,o)=>{o.d(r,{HP:()=>a,V6:()=>i,h4:()=>s,tN:()=>n});var t=o(2099);const a=e=>e.stock.stock,n=e=>e.stock.isLoading,i=e=>e.stock.error,s=e=>e.stock.posiciones;(0,t.Mz)([a],(e=>e)),(0,t.Mz)([e=>e.stock.stockByMaterial],(e=>e)),(0,t.Mz)([e=>e.stock.stockTotal],(e=>e))},5026:(e,r,o)=>{o.r(r),o.d(r,{ComprasPage:()=>Er});var t=o(5043),a=o(6240),n=o(344),i=o(4150),s=o(6446),l=o(5865),d=o(4669),c=o(4056),u=o(3845),p=o(9662),m=o(579);const x=(0,p.A)((0,m.jsx)("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt"),h=(0,p.A)((0,m.jsx)("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"}),"List");var v=o(8970),A=o(9010),g=o(5846),j=o(3216),b=o(8816),f=o(8137),y=o(1088),C=o(3003),w=o(7254);const S=e=>{var r;return(null===(r=e.remitos)||void 0===r?void 0:r.remitos)||[]},_=e=>{var r;return(null===(r=e.remitos)||void 0===r?void 0:r.isLoading)||!1},k=e=>{var r;return(null===(r=e.remitos)||void 0===r?void 0:r.error)||null},R=e=>{var r;return(null===(r=e.remitos)||void 0===r?void 0:r.proveedores)||[]},N=e=>{var r;return(null===(r=e.remitos)||void 0===r?void 0:r.items)||[]};var E=o(2410),M=o(35),L=o(6600),I=o(5316),P=o(5795),W=o(9347),D=o(1906),z=o(4227);const F=e=>{let{open:r,onClose:o,onProveedorCreado:a}=e;const n=(0,C.wA)(),[i,l]=(0,t.useState)(""),[d,c]=(0,t.useState)(!1),[u,p]=(0,t.useState)(""),x=async()=>{if(i.trim()){c(!0),p("");try{const e=await fetch("".concat(z.i.BASE_URL,"/proveedores"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:i,categoria:"proveedor"})});if(!e.ok)throw new Error("Error al crear el proveedor");const r=await e.json();n((0,E.in)()),a(r),l(""),o()}catch(u){p("Error al crear el proveedor. Por favor intente nuevamente."),console.error(u)}finally{c(!1)}}else p("Por favor ingrese un nombre de proveedor")},h=()=>{l(""),p(""),o()};return(0,m.jsxs)(M.A,{open:r,onClose:h,maxWidth:"sm",fullWidth:!0,children:[(0,m.jsx)(L.A,{children:"Agregar Nuevo Proveedor"}),(0,m.jsx)(I.A,{children:(0,m.jsxs)(s.A,{sx:{mt:1},children:[u&&(0,m.jsx)(w.A,{severity:"error",sx:{mb:2},children:u}),(0,m.jsx)(P.A,{autoFocus:!0,margin:"dense",label:"Nombre del Proveedor",type:"text",fullWidth:!0,value:i,onChange:e=>l(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),x())},disabled:d})]})}),(0,m.jsxs)(W.A,{children:[(0,m.jsx)(D.A,{onClick:h,color:"primary",disabled:d,children:"Cancelar"}),(0,m.jsx)(D.A,{onClick:x,color:"primary",disabled:d||!i.trim(),variant:"contained",children:d?"Guardando...":"Guardar"})]})]})};var T=o(3193),O=o(9190),B=o(1199),G=o(2143);const H=["costura","algodon","algodon-color","nylon","nylon REC","nylon-color","lycra","lycra REC","goma","tarugo","etiqueta","bolsa","percha","ribbon","caja","cinta","plantilla","film","consumibes(aceite y parafina)","faja","caballete"],V=e=>{let{open:r,onClose:o,onItemCreado:a,proveedorSeleccionado:n}=e;const i=(0,C.wA)(),[l,d]=(0,t.useState)({descripcion:"",categoria:""}),[c,u]=(0,t.useState)(!1),[p,x]=(0,t.useState)(""),h=async()=>{if(l.descripcion.trim()&&l.categoria)if(n){u(!0),x("");try{const e=await fetch("".concat(z.i.BASE_URL,"/items"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({descripcion:l.descripcion,categoria:l.categoria,proveedor:n})});if(!e.ok)throw new Error("Error al crear el item");const r=await e.json();i((0,E.in)()),a(r),d({descripcion:"",categoria:""}),o()}catch(p){x("Error al crear el item. Por favor intente nuevamente."),console.error(p)}finally{u(!1)}}else x("Debe seleccionar un proveedor primero");else x("Por favor complete todos los campos")},v=()=>{d({descripcion:"",categoria:""}),x(""),o()};return(0,m.jsxs)(M.A,{open:r,onClose:v,maxWidth:"sm",fullWidth:!0,children:[(0,m.jsx)(L.A,{children:"Agregar Nuevo Item"}),(0,m.jsx)(I.A,{children:(0,m.jsxs)(s.A,{sx:{mt:1},children:[p&&(0,m.jsx)(w.A,{severity:"error",sx:{mb:2},children:p}),(0,m.jsxs)(T.A,{fullWidth:!0,sx:{mb:2},children:[(0,m.jsx)(O.A,{children:"Categor\xeda"}),(0,m.jsx)(B.A,{value:l.categoria,label:"Categor\xeda",onChange:e=>d({...l,categoria:e.target.value}),disabled:c,children:H.map((e=>(0,m.jsx)(G.A,{value:e,children:e},e)))})]}),(0,m.jsx)(P.A,{autoFocus:!0,margin:"dense",label:"Descripci\xf3n del Item",type:"text",fullWidth:!0,value:l.descripcion,onChange:e=>d({...l,descripcion:e.target.value}),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),h())},disabled:c})]})}),(0,m.jsxs)(W.A,{children:[(0,m.jsx)(D.A,{onClick:v,color:"primary",disabled:c,children:"Cancelar"}),(0,m.jsx)(D.A,{onClick:h,color:"primary",disabled:c||!l.descripcion.trim()||!l.categoria,variant:"contained",children:c?"Guardando...":"Guardar"})]})]})},q="CreateRemitoEntradaForm_container__INx3s",U="CreateRemitoEntradaForm_form__kubp4",K="CreateRemitoEntradaForm_section__5XlfJ",Z="CreateRemitoEntradaForm_formGroup__imNqh",X="CreateRemitoEntradaForm_input__x-783",J="CreateRemitoEntradaForm_searchInput__eZATa",Q="CreateRemitoEntradaForm_select__qVVk6",Y="CreateRemitoEntradaForm_searchContainer__Js3hg",$="CreateRemitoEntradaForm_inputWithButton__+kgL8",ee="CreateRemitoEntradaForm_addItemButton__IFxTm",re="CreateRemitoEntradaForm_dropdown__mPfK8",oe="CreateRemitoEntradaForm_dropdownItem__4n0xf",te="CreateRemitoEntradaForm_itemName__6Xcem",ae="CreateRemitoEntradaForm_itemCategory__1rRlG",ne="CreateRemitoEntradaForm_partidaFields__w+1E8",ie="CreateRemitoEntradaForm_addButton__MaZ1h",se="CreateRemitoEntradaForm_partidasList__vy3vl",le="CreateRemitoEntradaForm_partidaItem__kHmwW",de="CreateRemitoEntradaForm_partidaInfo__Y4vPp",ce="CreateRemitoEntradaForm_partidaHeader__91uBP",ue="CreateRemitoEntradaForm_partidaCategory__4C-Ls",pe="CreateRemitoEntradaForm_partidaDetails__s2v5e",me="CreateRemitoEntradaForm_removeButton__br4nj",xe="CreateRemitoEntradaForm_submitButton__xnL1Z",he="CreateRemitoEntradaForm_loading__8-kWR",ve="CreateRemitoEntradaForm_error__9QaOz",Ae=e=>{let{onRemitoCreated:r}=e;const o=(0,C.wA)(),a=(0,C.d4)(R),n=(0,C.d4)(N),i=(0,C.d4)(_),s=(0,C.d4)(k),[l,d]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[p,x]=(0,t.useState)(""),[h,v]=(0,t.useState)(""),[A,g]=(0,t.useState)(""),[j,b]=(0,t.useState)(""),[f,y]=(0,t.useState)(""),[w,S]=(0,t.useState)(""),[M,L]=(0,t.useState)([]),[I,P]=(0,t.useState)(!1),[W,D]=(0,t.useState)(!1),[z,T]=(0,t.useState)(!1),O=(0,t.useRef)(null);(0,t.useEffect)((()=>{o((0,E.in)())}),[o]),(0,t.useEffect)((()=>{const e=e=>{O.current&&!O.current.contains(e.target)&&P(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const B=a.filter((e=>"proveedor"===e.categoria)),G=l?n.filter((e=>{if(!(e.descripcion&&!e.nombre))return!1;let r=!1;if(e.proveedor)if(e.proveedor.id)r=e.proveedor.id===l;else if(e.proveedor.nombre){const o=a.find((e=>e.id===l));r=e.proveedor.nombre===(null===o||void 0===o?void 0:o.nombre)}const o=""===A||(()=>{const r=A.toLowerCase().trim().split(" ").filter((e=>e.length>0));if(0===r.length)return!0;const o="".concat(e.descripcion," ").concat(e.categoria).toLowerCase();return r.every((e=>o.includes(e)))})();return r&&o})):[];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:q,children:[i&&(0,m.jsx)("div",{className:he,children:"Cargando datos..."}),s&&(0,m.jsxs)("div",{className:ve,children:["Error: ",s]}),(0,m.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!l||!c||!p)return void alert("Por favor complete todos los campos del remito");if(0===M.length)return void alert("Debe agregar al menos una partida al remito");const t=a.find((e=>e.id===l)),n={fechaSeleccionado:p,numeroRemitoSeleccionado:c,partidasRemito:M,proveedorSeleccionado:t,tipoMovimiento:"remitoEntrada"};try{await o((0,E.kI)(n)).unwrap(),d(""),u(""),x(""),L([]),r&&r(n),alert("Remito creado exitosamente")}catch(s){alert("Error al crear el remito: ".concat(s))}},className:U,children:[(0,m.jsxs)("div",{className:K,children:[(0,m.jsx)("h4",{children:"Datos del Remito"}),(0,m.jsxs)("div",{className:Z,children:[(0,m.jsx)("label",{htmlFor:"proveedor",children:"Proveedor:"}),(0,m.jsxs)("select",{id:"proveedor",value:l,onChange:e=>{"nuevo"===e.target.value?D(!0):d(e.target.value)},className:Q,required:!0,children:[(0,m.jsx)("option",{value:"",children:"Seleccionar proveedor"}),(0,m.jsx)("option",{value:"nuevo",style:{fontStyle:"italic",color:"#666"},children:"+ Agregar nuevo proveedor"}),B.map((e=>(0,m.jsx)("option",{value:e.id,children:e.nombre},e.id)))]})]}),(0,m.jsxs)("div",{className:Z,children:[(0,m.jsx)("label",{htmlFor:"numeroRemito",children:"N\xfamero de Remito:"}),(0,m.jsx)("input",{type:"text",id:"numeroRemito",value:c,onChange:e=>u(e.target.value),className:X,required:!0})]}),(0,m.jsxs)("div",{className:Z,children:[(0,m.jsx)("label",{htmlFor:"fechaRemito",children:"Fecha del Remito:"}),(0,m.jsx)("input",{type:"date",id:"fechaRemito",value:p,onChange:e=>x(e.target.value),className:X,required:!0})]})]}),l&&(0,m.jsxs)("div",{className:K,children:[(0,m.jsx)("h4",{children:"Agregar Partidas"}),(0,m.jsxs)("div",{className:Z,children:[(0,m.jsx)("label",{htmlFor:"item",children:"Item:"}),(0,m.jsxs)("div",{className:Y,ref:O,children:[(0,m.jsxs)("div",{className:$,children:[(0,m.jsx)("input",{type:"text",id:"item",value:A,onChange:e=>{g(e.target.value),v(""),P(!0)},onFocus:()=>P(!0),placeholder:"Buscar item por descripci\xf3n o categor\xeda...",className:J,autoComplete:"off"}),(0,m.jsx)("button",{type:"button",onClick:()=>T(!0),className:ee,title:"Agregar nuevo item",children:"+"})]}),I&&G.length>0&&(0,m.jsx)("div",{className:re,children:G.map((e=>(0,m.jsxs)("div",{className:oe,onClick:()=>(e=>{v(e.id),g("".concat(e.descripcion," - ").concat(e.categoria)),P(!1)})(e),children:[(0,m.jsx)("div",{className:te,children:e.descripcion}),(0,m.jsx)("div",{className:ae,children:e.categoria})]},e.id)))})]})]}),(0,m.jsxs)("div",{className:ne,children:[(0,m.jsxs)("div",{className:Z,children:[(0,m.jsx)("label",{htmlFor:"numeroPartida",children:"N\xfamero de Partida:"}),(0,m.jsx)("input",{type:"text",id:"numeroPartida",value:j,onChange:e=>b(e.target.value),className:X,placeholder:"Puede contener letras"})]}),(0,m.jsxs)("div",{className:Z,children:[(0,m.jsx)("label",{htmlFor:"kilos",children:"Kilos:"}),(0,m.jsx)("input",{type:"number",id:"kilos",value:f,onChange:e=>y(e.target.value),className:X,step:"0.01",min:"0"})]}),(0,m.jsxs)("div",{className:Z,children:[(0,m.jsx)("label",{htmlFor:"unidades",children:"Unidades:"}),(0,m.jsx)("input",{type:"number",id:"unidades",value:w,onChange:e=>S(e.target.value),className:X,min:"0"})]})]}),(0,m.jsx)("button",{type:"button",onClick:()=>{if(!h||!j||!f||!w)return void alert("Por favor complete todos los campos de la partida");const e=n.find((e=>e.id===h)),r={kilos:parseFloat(f),numeroPartida:j,unidades:parseInt(w),item:e};L([...M,r]),v(""),g(""),b(""),y(""),S("")},className:ie,disabled:!h||!j||!f||!w,children:"Agregar Partida"})]}),M.length>0&&(0,m.jsxs)("div",{className:K,children:[(0,m.jsxs)("h4",{children:["Partidas del Remito (",M.length,")"]}),(0,m.jsx)("div",{className:se,children:M.map(((e,r)=>(0,m.jsxs)("div",{className:le,children:[(0,m.jsxs)("div",{className:de,children:[(0,m.jsxs)("div",{className:ce,children:[(0,m.jsx)("strong",{children:e.item.descripcion}),(0,m.jsx)("span",{className:ue,children:e.item.categoria})]}),(0,m.jsxs)("div",{className:pe,children:[(0,m.jsxs)("span",{children:["Partida: ",e.numeroPartida]}),(0,m.jsxs)("span",{children:["Kilos: ",e.kilos]}),(0,m.jsxs)("span",{children:["Unidades: ",e.unidades]})]})]}),(0,m.jsx)("button",{type:"button",onClick:()=>(e=>{const r=M.filter(((r,o)=>o!==e));L(r)})(r),className:me,children:"Eliminar"})]},r)))})]}),M.length>0&&(0,m.jsx)("button",{type:"submit",className:xe,children:"Crear Remito de Entrada"})]})]}),(0,m.jsx)(F,{open:W,onClose:()=>D(!1),onProveedorCreado:e=>{d(e.id)}}),(0,m.jsx)(V,{open:z,onClose:()=>T(!1),onItemCreado:e=>{v(e.id),g("".concat(e.descripcion," - ").concat(e.categoria))},proveedorSeleccionado:a.find((e=>e.id===l))})]})},ge=(0,p.A)((0,m.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh");var je=o(3211),be=o(5655);var fe=o(7518);const ye="LoadingState_loading__HIR0V",Ce="LoadingState_spinner__RQ48m",we=()=>(0,m.jsxs)("div",{className:ye,children:[(0,m.jsx)("div",{className:Ce}),(0,m.jsx)("p",{children:fe.UU.LOADING})]});var Se=o(9414);const _e={card:"MaterialCard_card__1B+8W",title:"MaterialCard_title__Ilxrr",details:"MaterialCard_details__sDPMZ",stock:"MaterialCard_stock__U2MEr",deposito:"MaterialCard_deposito__sgh0V",compras:"MaterialCard_compras__aAQTi"},ke=t.memo((e=>{let{material:r,variant:o="default",onClick:t,children:a}=e;return(0,m.jsx)("div",{className:"".concat(_e.card," ").concat(_e[o]),onClick:()=>null===t||void 0===t?void 0:t(r),children:(()=>{var e,t;switch(o){case"stock":const o=(e=>{var r,o;const t=(null===(r=e.item)||void 0===r?void 0:r.categoria)||"",a=(null===(o=e.item)||void 0===o?void 0:o.descripcion)||"";return t&&a?"".concat(t," - ").concat(a):a||t||"Material sin informaci\xf3n"})(r);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h3",{className:_e.title,children:o}),(0,m.jsxs)("div",{className:_e.details,children:[(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Kilos:"})," ",(null===(e=r.kilos)||void 0===e?void 0:e.toFixed(2))||0]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Unidades:"})," ",r.unidades||0]}),(null===(t=r.partida)||void 0===t?void 0:t.numeroPartida)&&(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Partida:"})," ",r.partida.numeroPartida]}),r.proveedor&&(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Proveedor:"})," ",r.proveedor]})]})]});case"deposito":return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h3",{className:_e.title,children:r.posicion}),(0,m.jsxs)("div",{className:_e.details,children:[(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Item:"})," ",r.item]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Stock:"})," ",r.stock]})]})]});default:return a}})()})})),Re="MaterialList_materialList__KAhWr",Ne="MaterialList_emptyState__S8SnN",Ee=e=>{let{materials:r,variant:o="stock",onMaterialClick:t}=e;return 0===r.length?(0,m.jsx)("div",{className:Ne,children:(0,m.jsx)("p",{children:"No se encontraron materiales"})}):(0,m.jsx)("div",{className:Re,children:r.map(((e,r)=>{var a,n;const i=null!==(a=e.item)&&void 0!==a&&a.id&&null!==(n=e.partida)&&void 0!==n&&n.id?"".concat(e.item.id,"-").concat(e.partida.id):"material-".concat(r);return(0,m.jsx)(ke,{material:e,variant:o,onClick:t},i)}))})},Me="StockSummary_summary__iHXx9",Le="StockSummary_summaryItem__NtfcJ",Ie=e=>{let{materials:r}=e;const o=(e=>e.reduce(((e,r)=>e+(r.kilos||0)),0))(r),t=(e=>e.reduce(((e,r)=>e+(r.unidades||0)),0))(r),a=(e=>{const r=new Set;return e.forEach((e=>{var o;null!==(o=e.item)&&void 0!==o&&o.id&&r.add(e.item.id)})),r.size})(r);return(0,m.jsxs)("div",{className:Me,children:[(0,m.jsxs)("div",{className:Le,children:[(0,m.jsx)("span",{children:fe.Vx.TOTAL_KILOS}),(0,m.jsx)("strong",{children:o.toFixed(fe.LP.DECIMAL_PLACES)})]}),(0,m.jsxs)("div",{className:Le,children:[(0,m.jsx)("span",{children:fe.Vx.TOTAL_UNIDADES}),(0,m.jsx)("strong",{children:t})]}),(0,m.jsxs)("div",{className:Le,children:[(0,m.jsx)("span",{children:fe.Vx.MATERIALES}),(0,m.jsx)("strong",{children:a})]}),(0,m.jsxs)("div",{className:Le,children:[(0,m.jsx)("span",{children:fe.Vx.PARTIDAS}),(0,m.jsx)("strong",{children:r.length})]})]})},Pe="StockContent_stockContent__nkntn",We="StockContent_header__Z4D6E",De=e=>{let{filteredMaterials:r,onSearch:o,onMaterialClick:t}=e;return(0,m.jsxs)("div",{className:Pe,children:[(0,m.jsxs)("div",{className:We,children:[(0,m.jsx)(Se.I,{placeholder:fe.eG.STOCK,onSearch:o}),(0,m.jsx)(Ie,{materials:r})]}),(0,m.jsx)(Ee,{materials:r,variant:"stock",onMaterialClick:t})]})};var ze=o(1637),Fe=o(141),Te=o(679);const Oe=e=>{var r;return(null===(r=e.ordenesCompra)||void 0===r?void 0:r.ordenesCompra)||[]},Be=e=>{var r;return(null===(r=e.ordenesCompra)||void 0===r?void 0:r.isLoading)||!1},Ge=e=>{var r;return(null===(r=e.ordenesCompra)||void 0===r?void 0:r.error)||null},He=e=>{let{title:r,subtitle:o,icon:t,actionLabel:i,onAction:d,showAction:c=!0,sx:u={}}=e;const p=(0,a.A)(),x=(0,n.A)(p.breakpoints.down("sm"));return(0,m.jsx)(y.A,{title:x?void 0:r,subtitle:x?void 0:o,padding:"comfortable",elevation:0,sx:{textAlign:"center",backgroundColor:"var(--color-background)",border:"2px dashed var(--color-border)",...u},children:(0,m.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,py:2},children:[t&&(0,m.jsx)(s.A,{sx:{color:"var(--color-text-secondary)",fontSize:x?"3rem":"4rem",opacity:.6},children:(0,m.jsx)(t,{sx:{fontSize:"inherit"}})}),(0,m.jsxs)(s.A,{sx:{maxWidth:400},children:[(0,m.jsx)(l.A,{variant:x?"h6":"h5",sx:{fontWeight:600,color:"var(--color-text-primary)",mb:1},children:r}),(0,m.jsx)(l.A,{variant:"body2",sx:{color:"var(--color-text-secondary)",lineHeight:1.5},children:o})]}),c&&i&&d&&(0,m.jsx)(D.A,{variant:"contained",startIcon:(0,m.jsx)(Fe.A,{}),onClick:d,sx:{backgroundColor:"var(--color-primary)",mt:2},children:i})]})})};var Ve=o(8407);const qe=e=>{var r;return(null===(r=e.presupuesto)||void 0===r?void 0:r.presupuesto)||[]},Ue=e=>{var r;return(null===(r=e.presupuesto)||void 0===r?void 0:r.isLoading)||!1},Ke=e=>{var r;return(null===(r=e.presupuesto)||void 0===r?void 0:r.error)||null};var Ze=o(8168),Xe=o(8587),Je=o(8387),Qe=o(8610),Ye=o(4535),$e=o(6431),er=o(279),rr=o(3336);const or=t.createContext({});var tr=o(4516),ar=o(4162),nr=o(2532),ir=o(2372);function sr(e){return(0,ir.Ay)("MuiAccordion",e)}const lr=(0,nr.A)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),dr=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],cr=(0,Ye.Ay)(rr.A,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[{["& .".concat(lr.region)]:r.region},r.root,!o.square&&r.rounded,!o.disableGutters&&r.gutters]}})((e=>{let{theme:r}=e;const o={duration:r.transitions.duration.shortest};return{position:"relative",transition:r.transitions.create(["margin"],o),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(r.vars||r).palette.divider,transition:r.transitions.create(["opacity","background-color"],o)},"&:first-of-type":{"&::before":{display:"none"}},["&.".concat(lr.expanded)]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},["&.".concat(lr.disabled)]:{backgroundColor:(r.vars||r).palette.action.disabledBackground}}}),(e=>{let{theme:r}=e;return{variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(r.vars||r).shape.borderRadius,borderTopRightRadius:(r.vars||r).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(r.vars||r).shape.borderRadius,borderBottomRightRadius:(r.vars||r).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{["&.".concat(lr.expanded)]:{margin:"16px 0"}}}]}})),ur=t.forwardRef((function(e,r){const o=(0,$e.b)({props:e,name:"MuiAccordion"}),{children:a,className:n,defaultExpanded:i=!1,disabled:s=!1,disableGutters:l=!1,expanded:d,onChange:c,square:u=!1,slots:p={},slotProps:x={},TransitionComponent:h,TransitionProps:v}=o,A=(0,Xe.A)(o,dr),[g,j]=(0,tr.A)({controlled:d,default:i,name:"Accordion",state:"expanded"}),b=t.useCallback((e=>{j(!g),c&&c(e,!g)}),[g,c,j]),[f,...y]=t.Children.toArray(a),C=t.useMemo((()=>({expanded:g,disabled:s,disableGutters:l,toggle:b})),[g,s,l,b]),w=(0,Ze.A)({},o,{square:u,disabled:s,disableGutters:l,expanded:g}),S=(e=>{const{classes:r,square:o,expanded:t,disabled:a,disableGutters:n}=e,i={root:["root",!o&&"rounded",t&&"expanded",a&&"disabled",!n&&"gutters"],region:["region"]};return(0,Qe.A)(i,sr,r)})(w),_=(0,Ze.A)({transition:h},p),k=(0,Ze.A)({transition:v},x),[R,N]=(0,ar.A)("transition",{elementType:er.A,externalForwardedProps:{slots:_,slotProps:k},ownerState:w});return(0,m.jsxs)(cr,(0,Ze.A)({className:(0,Je.A)(S.root,n),ref:r,ownerState:w,square:u},A,{children:[(0,m.jsx)(or.Provider,{value:C,children:f}),(0,m.jsx)(R,(0,Ze.A)({in:g,timeout:"auto"},N,{children:(0,m.jsx)("div",{"aria-labelledby":f.props.id,id:f.props["aria-controls"],role:"region",className:S.region,children:y})}))]}))}));var pr=o(6236);function mr(e){return(0,ir.Ay)("MuiAccordionSummary",e)}const xr=(0,nr.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),hr=["children","className","expandIcon","focusVisibleClassName","onClick"],vr=(0,Ye.Ay)(pr.A,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,r)=>r.root})((e=>{let{theme:r}=e;const o={duration:r.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:r.spacing(0,2),transition:r.transitions.create(["min-height","background-color"],o),["&.".concat(xr.focusVisible)]:{backgroundColor:(r.vars||r).palette.action.focus},["&.".concat(xr.disabled)]:{opacity:(r.vars||r).palette.action.disabledOpacity},["&:hover:not(.".concat(xr.disabled,")")]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{["&.".concat(xr.expanded)]:{minHeight:64}}}]}})),Ar=(0,Ye.Ay)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,r)=>r.content})((e=>{let{theme:r}=e;return{display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:r.transitions.create(["margin"],{duration:r.transitions.duration.shortest}),["&.".concat(xr.expanded)]:{margin:"20px 0"}}}]}})),gr=(0,Ye.Ay)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,r)=>r.expandIconWrapper})((e=>{let{theme:r}=e;return{display:"flex",color:(r.vars||r).palette.action.active,transform:"rotate(0deg)",transition:r.transitions.create("transform",{duration:r.transitions.duration.shortest}),["&.".concat(xr.expanded)]:{transform:"rotate(180deg)"}}})),jr=t.forwardRef((function(e,r){const o=(0,$e.b)({props:e,name:"MuiAccordionSummary"}),{children:a,className:n,expandIcon:i,focusVisibleClassName:s,onClick:l}=o,d=(0,Xe.A)(o,hr),{disabled:c=!1,disableGutters:u,expanded:p,toggle:x}=t.useContext(or),h=(0,Ze.A)({},o,{expanded:p,disabled:c,disableGutters:u}),v=(e=>{const{classes:r,expanded:o,disabled:t,disableGutters:a}=e,n={root:["root",o&&"expanded",t&&"disabled",!a&&"gutters"],focusVisible:["focusVisible"],content:["content",o&&"expanded",!a&&"contentGutters"],expandIconWrapper:["expandIconWrapper",o&&"expanded"]};return(0,Qe.A)(n,mr,r)})(h);return(0,m.jsxs)(vr,(0,Ze.A)({focusRipple:!1,disableRipple:!0,disabled:c,component:"div","aria-expanded":p,className:(0,Je.A)(v.root,n),focusVisibleClassName:(0,Je.A)(v.focusVisible,s),onClick:e=>{x&&x(e),l&&l(e)},ref:r,ownerState:h},d,{children:[(0,m.jsx)(Ar,{className:v.content,ownerState:h,children:a}),i&&(0,m.jsx)(gr,{className:v.expandIconWrapper,ownerState:h,children:i})]}))}));function br(e){return(0,ir.Ay)("MuiAccordionDetails",e)}(0,nr.A)("MuiAccordionDetails",["root"]);const fr=["className"],yr=(0,Ye.Ay)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,r)=>r.root})((e=>{let{theme:r}=e;return{padding:r.spacing(1,2,2)}})),Cr=t.forwardRef((function(e,r){const o=(0,$e.b)({props:e,name:"MuiAccordionDetails"}),{className:t}=o,a=(0,Xe.A)(o,fr),n=o,i=(e=>{const{classes:r}=e;return(0,Qe.A)({root:["root"]},br,r)})(n);return(0,m.jsx)(yr,(0,Ze.A)({className:(0,Je.A)(i.root,t),ref:r,ownerState:n},a))}));var wr=o(8903),Sr=o(7392),_r=o(1337),kr=o(3471);const Rr=()=>{var e;const{remitos:r,isLoading:o,error:a,handleRetry:n,handleDeleteMovimiento:i}=(()=>{const e=(0,C.wA)(),r=(0,C.d4)(S),o=(0,C.d4)(_),a=(0,C.d4)(k);return(0,t.useEffect)((()=>{e((0,E.Nr)())}),[e]),{remitos:r,isLoading:o,error:a,handleRetry:()=>{e((0,E.Nr)())},handleDeleteMovimiento:async r=>{try{return await e((0,E.LN)(r)).unwrap(),e((0,E.Nr)()),{success:!0}}catch(a){return{success:!1,error:a.message||"Error al eliminar el movimiento"}}}}})(),[d,c]=(0,t.useState)(null),[p,x]=(0,t.useState)({open:!1,item:null}),h=r;if(o)return(0,m.jsx)(s.A,{display:"flex",justifyContent:"center",p:3,children:(0,m.jsx)(ze.A,{})});if(a)return(0,m.jsx)(w.A,{severity:"error",onClose:n,children:a});if(0===h.length)return(0,m.jsx)(l.A,{color:"textSecondary",textAlign:"center",p:3,children:"No hay remitos de entrada cargados. Crea uno nuevo para comenzar."});const v=e=>(r,o)=>{c(o?e:null)},A=()=>{x({open:!1,item:null})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(s.A,{children:h.map(((e,r)=>{const o="remito-".concat(r),t=e.partidas.reduce(((e,r)=>e+r.items.reduce(((e,r)=>e+r.kilos),0)),0),a=e.partidas.reduce(((e,r)=>e+r.items.reduce(((e,r)=>e+r.unidades),0)),0),n=e.partidas.reduce(((e,r)=>e+r.items.length),0);return(0,m.jsxs)(ur,{expanded:d===o,onChange:v(o),sx:{mb:2,"&:before":{display:"none"}},children:[(0,m.jsx)(jr,{expandIcon:(0,m.jsx)(_r.A,{}),children:(0,m.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:2,width:"100%"},children:[(0,m.jsxs)(s.A,{sx:{flexGrow:1},children:[(0,m.jsxs)(l.A,{variant:"h6",fontWeight:"bold",children:["Remito #",e.numeroRemito]}),(0,m.jsxs)(l.A,{variant:"body2",color:"textSecondary",children:[e.proveedor.nombre," \u2022 ",e.fecha?new Date(e.fecha).toLocaleDateString():"Sin fecha"]})]}),(0,m.jsxs)(s.A,{sx:{display:"flex",gap:1},children:[(0,m.jsx)(u.A,{label:"".concat(n," items"),size:"small",color:"primary",variant:"outlined"}),(0,m.jsx)(u.A,{label:"".concat(t.toFixed(2)," kg"),size:"small",color:"secondary",variant:"outlined"}),(0,m.jsx)(u.A,{label:"".concat(a," uds"),size:"small",color:"info",variant:"outlined"})]})]})}),(0,m.jsx)(Cr,{children:(0,m.jsxs)(s.A,{children:[(0,m.jsx)(l.A,{variant:"subtitle2",fontWeight:"bold",mb:2,children:"Detalle del Remito:"}),(0,m.jsx)(wr.Ay,{container:!0,spacing:2,children:e.partidas.map(((e,r)=>(0,m.jsx)(wr.Ay,{item:!0,xs:12,children:(0,m.jsxs)(s.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,backgroundColor:"#f8f9fa",mb:2},children:[(0,m.jsxs)(l.A,{variant:"subtitle1",fontWeight:"bold",mb:2,children:["Partida: ",e.numeroPartida]}),(0,m.jsx)(wr.Ay,{container:!0,spacing:2,children:e.items.map(((r,o)=>(0,m.jsx)(wr.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,m.jsxs)(s.A,{sx:{p:2,border:"1px solid #e0e0e0",borderRadius:1,backgroundColor:"#ffffff",position:"relative"},children:["stock"!==e.estado&&(0,m.jsx)(Sr.A,{size:"small",color:"error",onClick:()=>(e=>{x({open:!0,item:e})})(r),sx:{position:"absolute",top:4,right:4},children:(0,m.jsx)(kr.A,{fontSize:"small"})}),(0,m.jsx)(l.A,{variant:"subtitle2",fontWeight:"bold",children:r.descripcion}),(0,m.jsxs)(l.A,{variant:"body2",color:"textSecondary",children:["Categor\xeda: ",r.categoria]}),(0,m.jsxs)(s.A,{sx:{display:"flex",gap:1,mt:1},children:[(0,m.jsx)(u.A,{label:"".concat(r.kilos," kg"),size:"small",color:"secondary"}),(0,m.jsx)(u.A,{label:"".concat(r.unidades," uds"),size:"small",color:"info"})]})]})},o)))})]})},r)))})]})})]},o)}))}),(0,m.jsxs)(M.A,{open:p.open,onClose:A,children:[(0,m.jsx)(L.A,{children:"Confirmar eliminaci\xf3n"}),(0,m.jsxs)(I.A,{children:[(0,m.jsxs)(l.A,{children:['\xbfEst\xe1s seguro de que quieres eliminar el item "',null===(e=p.item)||void 0===e?void 0:e.descripcion,'"?']}),(0,m.jsx)(l.A,{variant:"body2",color:"textSecondary",mt:1,children:"Esta acci\xf3n no se puede deshacer."})]}),(0,m.jsxs)(W.A,{children:[(0,m.jsx)(D.A,{onClick:A,children:"Cancelar"}),(0,m.jsx)(D.A,{onClick:async()=>{if(p.item){const e=await i(p.item.movimientoId);e.success?x({open:!1,item:null}):console.error("Error al eliminar:",e.error)}},color:"error",variant:"contained",children:"Eliminar"})]})]})]})},Nr=[{id:"remitos",label:"Crear Remito",icon:(0,m.jsx)(x,{}),component:()=>{const e=(0,a.A)(),r=((0,n.A)(e.breakpoints.down("sm")),(0,C.d4)(_),(0,C.d4)(k));return(0,m.jsxs)(s.A,{sx:{width:"100%"},children:[r&&(0,m.jsx)(w.A,{severity:"error",sx:{mb:2},children:r}),(0,m.jsx)(Ae,{onRemitoCreated:e=>{console.log("Remito creado:",e)}})]})},color:"primary"},{id:"listado-remitos",label:"Listado Remitos",icon:(0,m.jsx)(h,{}),component:()=>{const e=(0,a.A)(),r=((0,n.A)(e.breakpoints.down("sm")),(0,C.d4)(_),(0,C.d4)(k));return(0,m.jsxs)(s.A,{sx:{width:"100%"},children:[r&&(0,m.jsx)(w.A,{severity:"error",sx:{mb:2},children:r}),(0,m.jsx)(Rr,{})]})},color:"info"},{id:"stock",label:"Stock",icon:(0,m.jsx)(v.A,{}),component:()=>{const e=(0,a.A)(),{filteredMaterials:r,isLoading:o,error:i,handleSearch:d,handleRetry:c}=((0,n.A)(e.breakpoints.down("sm")),(()=>{const e=(0,C.wA)(),r=(0,C.d4)(be.HP),o=(0,C.d4)(be.tN),a=(0,C.d4)(be.V6),[n,i]=(0,t.useState)([]);return(0,t.useEffect)((()=>{e((0,je.cM)())}),[e]),(0,t.useEffect)((()=>{i(r)}),[r]),{stock:r,filteredMaterials:n,isLoading:o,error:a,handleSearch:e=>{const o=((e,r)=>{if(!r.trim())return e;const o=r.toLowerCase().trim().split(/\s+/);return e.filter((e=>{var r,t,a;const n=[(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.descripcion)||"",(null===e||void 0===e||null===(t=e.item)||void 0===t?void 0:t.categoria)||"",(null===e||void 0===e||null===(a=e.partida)||void 0===a?void 0:a.numeroPartida)||"",(null===e||void 0===e?void 0:e.proveedor)||""].join(" ").toLowerCase();return o.every((e=>n.includes(e)))}))})(r,e);i(o)},handleRetry:()=>{e((0,je.cM)())}}})()),{handleMaterialClick:u}={handleMaterialClick:e=>{console.log("Material seleccionado:",e)}};return o?(0,m.jsx)(we,{}):i?(0,m.jsxs)(y.A,{title:"Error al cargar el stock",subtitle:"No se pudieron cargar los datos del inventario",sx:{maxWidth:600,mx:"auto"},children:[(0,m.jsx)(l.A,{color:"error",sx:{mb:3},children:i}),(0,m.jsx)(D.A,{variant:"contained",onClick:c,startIcon:(0,m.jsx)(ge,{}),sx:{backgroundColor:"var(--color-primary)"},children:"Reintentar"})]}):(0,m.jsx)(s.A,{sx:{width:"100%"},children:(0,m.jsx)(De,{filteredMaterials:r,onSearch:d,onMaterialClick:u})})},color:"success"},{id:"ordenes",label:"\xd3rdenes de Compra",icon:(0,m.jsx)(A.A,{}),component:()=>{const e=(0,C.wA)(),r=(0,a.A)(),o=(0,n.A)(r.breakpoints.down("sm")),i=(0,C.d4)(Oe),d=(0,C.d4)(Be),c=(0,C.d4)(Ge);(0,t.useEffect)((()=>{e((0,Te.bu)())}),[e]);const p=()=>{console.log("Crear nueva orden de compra")};return d?(0,m.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:(0,m.jsx)(ze.A,{})}):(0,m.jsxs)(s.A,{sx:{width:"100%"},children:[(0,m.jsx)(y.A,{title:o?void 0:"\xd3rdenes de Compra",subtitle:o?void 0:"Gesti\xf3n de \xf3rdenes de compra",headerAction:(0,m.jsx)(D.A,{variant:"contained",color:"primary",onClick:p,startIcon:(0,m.jsx)(Fe.A,{}),sx:{backgroundColor:"var(--color-primary)"},children:o?"Nueva":"Crear Orden"}),padding:o?"compact":"normal",sx:{mb:3},children:(0,m.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,m.jsx)(l.A,{variant:"body2",color:"textSecondary",children:"Total de \xf3rdenes:"}),(0,m.jsx)(u.A,{label:i.length,color:"primary",size:"small"})]})}),c&&(0,m.jsx)(w.A,{severity:"error",sx:{mb:2},children:c}),(0,m.jsx)(y.A,{title:o?void 0:"Lista de \xd3rdenes",subtitle:o?void 0:"Mostrando ".concat(i.length," \xf3rdenes"),padding:o?"compact":"normal",children:0===i.length?(0,m.jsx)(He,{title:"No hay \xf3rdenes de compra",subtitle:"Crea tu primera orden de compra para comenzar a gestionar las compras de la empresa",icon:A.A,actionLabel:"Crear Primera Orden",onAction:p}):(0,m.jsx)(s.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:i.map((e=>(0,m.jsx)(y.A,{title:"Orden #".concat(e.numero),subtitle:"Proveedor: ".concat(e.proveedor),padding:"compact",elevation:0,sx:{border:"1px solid var(--color-border)",backgroundColor:"var(--color-background)"},headerAction:(0,m.jsx)(u.A,{label:e.estado,color:"Aprobada"===e.estado?"success":"Pendiente"===e.estado?"warning":"default",size:"small"}),children:(0,m.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,m.jsxs)(l.A,{variant:"body2",color:"textSecondary",children:["Fecha: ",new Date(e.fecha).toLocaleDateString()]}),(0,m.jsxs)(l.A,{variant:"body2",color:"textSecondary",children:["Estado: ",e.estado]})]})},e.id)))})})]})},color:"warning"},{id:"presupuesto",label:"Presupuesto",icon:(0,m.jsx)(g.A,{}),component:()=>{const e=(0,C.wA)(),r=(0,a.A)(),o=(0,n.A)(r.breakpoints.down("sm")),i=(0,C.d4)(qe),d=(0,C.d4)(Ue),c=(0,C.d4)(Ke);(0,t.useEffect)((()=>{e((0,Ve.Oj)())}),[e]);const p=()=>{console.log("Crear nuevo presupuesto")};return d?(0,m.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:(0,m.jsx)(ze.A,{})}):(0,m.jsxs)(s.A,{sx:{width:"100%"},children:[(0,m.jsx)(y.A,{title:o?void 0:"Presupuesto",subtitle:o?void 0:"Gesti\xf3n de presupuestos",headerAction:(0,m.jsx)(D.A,{variant:"contained",color:"primary",onClick:p,startIcon:(0,m.jsx)(Fe.A,{}),sx:{backgroundColor:"var(--color-primary)"},children:o?"Nuevo":"Crear Presupuesto"}),padding:o?"compact":"normal",sx:{mb:3},children:(0,m.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,m.jsx)(l.A,{variant:"body2",color:"textSecondary",children:"Total de presupuestos:"}),(0,m.jsx)(u.A,{label:i.length,color:"primary",size:"small"})]})}),c&&(0,m.jsx)(w.A,{severity:"error",sx:{mb:2},children:c}),(0,m.jsx)(y.A,{title:o?void 0:"Lista de Presupuestos",subtitle:o?void 0:"Mostrando ".concat(i.length," presupuestos"),padding:o?"compact":"normal",children:0===i.length?(0,m.jsx)(He,{title:"No hay presupuestos",subtitle:"Crea tu primer presupuesto para comenzar a gestionar los gastos de la empresa",icon:g.A,actionLabel:"Crear Primer Presupuesto",onAction:p}):(0,m.jsx)(s.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:i.map((e=>(0,m.jsx)(y.A,{title:"Presupuesto #".concat(e.numero),subtitle:e.descripcion,padding:"compact",elevation:0,sx:{border:"1px solid var(--color-border)",backgroundColor:"var(--color-background)"},headerAction:(0,m.jsx)(u.A,{label:"$".concat(e.monto.toLocaleString()),color:"success",size:"small"}),children:(0,m.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,m.jsxs)(l.A,{variant:"body2",color:"textSecondary",children:["Descripci\xf3n: ",e.descripcion]}),(0,m.jsxs)(l.A,{variant:"body2",color:"textSecondary",children:["Monto: $",e.monto.toLocaleString()]}),(0,m.jsxs)(l.A,{variant:"body2",color:"textSecondary",children:["Fecha: ",new Date(e.fecha).toLocaleDateString()]})]})},e.id)))})})]})},color:"secondary"}],Er=()=>{var e;(0,j.Zp)();const r=(0,a.A)(),o=(0,n.A)(r.breakpoints.down("sm")),[p,x]=((0,n.A)(r.breakpoints.down("md")),(0,t.useState)(0)),[h,v]=(0,t.useState)(null),[A,g]=(0,t.useState)({remitos:0,"listado-remitos":0,stock:0,ordenes:0,presupuesto:0});(0,t.useEffect)((()=>{const e=b.y.getUser();e&&v(e)}),[]);if(!h)return null;const C=null===(e=Nr[p])||void 0===e?void 0:e.component;return(0,m.jsx)(f.A,{user:h,onLogout:()=>{b.y.logout(),window.location.href="/depositoDW_v2/login"},pageTitle:"Compras",children:(0,m.jsxs)(i.A,{maxWidth:"lg",sx:{py:o?2:4},children:[!o&&(0,m.jsxs)(s.A,{sx:{mb:4},children:[(0,m.jsx)(l.A,{variant:"h3",sx:{fontWeight:700,color:"var(--color-text-primary)",mb:.5},children:"Compras"}),(0,m.jsx)(l.A,{variant:"body2",sx:{color:"var(--color-text-secondary)",mb:3},children:"Gesti\xf3n integral de compras, stock y presupuestos"})]}),(0,m.jsx)(y.A,{title:o?void 0:"M\xf3dulos de Compras",subtitle:o?void 0:"Accede a las diferentes funcionalidades del sistema",padding:o?"compact":"normal",sx:{mb:o?2:4},children:(0,m.jsx)(s.A,{sx:{width:"100%",maxWidth:"100%"},children:(0,m.jsx)(d.A,{value:p,onChange:(e,r)=>{x(r)},variant:o?"scrollable":"fullWidth",scrollButtons:!!o&&"auto",allowScrollButtonsMobile:!0,sx:{"& .MuiTabs-indicator":{backgroundColor:"var(--color-primary)",height:3,borderRadius:"2px"},"& .MuiTab-root":{minHeight:56,textTransform:"none",fontWeight:500,fontSize:"0.9rem",color:"var(--color-text-secondary)","&.Mui-selected":{color:"var(--color-primary)",fontWeight:600},"&:hover":{backgroundColor:"var(--color-divider)",color:"var(--color-text-primary)"}}},children:Nr.map(((e,r)=>(0,m.jsx)(c.A,{label:(0,m.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1,flexDirection:o?"column":"row"},children:[e.icon,(0,m.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",alignItems:o?"center":"flex-start"},children:[(0,m.jsx)(l.A,{variant:"body2",sx:{fontWeight:"inherit"},children:e.label}),A[e.id]>0&&(0,m.jsx)(u.A,{label:A[e.id],size:"small",color:e.color,sx:{height:20,fontSize:"0.7rem",mt:o?.5:0}})]})]}),sx:{minWidth:o?120:"auto",px:o?1:2}},e.id)))})})}),(0,m.jsx)(s.A,{sx:{width:"100%",maxWidth:"100%",minHeight:"400px"},children:C&&(0,m.jsx)(C,{})})]})})}},8137:(e,r,o)=>{o.d(r,{A:()=>P});var t=o(5043),a=o(6240),n=o(344),i=o(6446),s=o(5865),l=o(1045),d=o(3845),c=o(469),u=o(5721),p=o(681),m=o(8968),x=o(2050),h=o(8734),v=o(9336),A=o(2314),g=o(5263),j=o(7392),b=o(4109),f=o(8970),y=o(9010),C=o(8606),w=o(3010),S=o(8602),_=o(5846),k=o(2069),R=o(9906),N=o(3287),E=o(3216);const M=e=>{switch(e){case"admin":return"error";case"gerente":return"warning";case"supervisor":return"info";case"operador":return"success";default:return"default"}},L=e=>{switch(e){case"admin":return"Administrador";case"gerente":return"Gerente";case"supervisor":return"Supervisor";case"operador":return"Operador";default:return e}};var I=o(579);const P=e=>{var r,o;let{children:P,user:W,onLogout:D,pageTitle:z}=e;const[F,T]=(0,t.useState)(!1),O=(0,a.A)(),B=(0,n.A)(O.breakpoints.down("md")),G=(0,E.Zp)(),H=(0,E.zy)(),V=()=>{T(!F)},q=[{section:"Operaciones",items:[{label:"Dep\xf3sito",path:"/depositoDW_v2/deposito",icon:(0,I.jsx)(f.A,{}),show:!0},{label:"Compras",path:"/depositoDW_v2/compras",icon:(0,I.jsx)(y.A,{}),show:"admin"===(null===W||void 0===W?void 0:W.role)},{label:"Calidad",path:"/depositoDW_v2/calidad",icon:(0,I.jsx)(C.A,{}),show:"admin"===(null===W||void 0===W?void 0:W.role)},{label:"Salida",path:"/depositoDW_v2/salida",icon:(0,I.jsx)(w.A,{}),show:"admin"===(null===W||void 0===W?void 0:W.role)}]},{section:"Administraci\xf3n",items:[{label:"Dashboard",path:"/depositoDW_v2/admin",icon:(0,I.jsx)(S.A,{}),show:"admin"===(null===W||void 0===W?void 0:W.role)},{label:"Reportes",path:"/depositoDW_v2/reportes",icon:(0,I.jsx)(_.A,{}),show:"admin"===(null===W||void 0===W?void 0:W.role)}]}],U=e=>H.pathname===e,K=(0,I.jsxs)(i.A,{sx:{width:280,height:"100%",display:"flex",flexDirection:"column",backgroundColor:"var(--color-surface)"},children:[(0,I.jsxs)(i.A,{sx:{p:3,background:"linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%)",color:"white",textAlign:"center",position:"relative",overflow:"hidden"},children:[(0,I.jsx)(i.A,{sx:{position:"absolute",top:-20,right:-20,width:100,height:100,borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.1)",zIndex:0}}),(0,I.jsxs)(i.A,{sx:{position:"relative",zIndex:1},children:[(0,I.jsx)(s.A,{variant:"h5",sx:{fontWeight:700,mb:.5,textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"Der Will"}),(0,I.jsx)(s.A,{variant:"body2",sx:{opacity:.9,fontWeight:500},children:"Sistema de Gesti\xf3n"})]})]}),(0,I.jsx)(i.A,{sx:{p:3,pb:2},children:(0,I.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:2,p:2.5,backgroundColor:"var(--color-background)",borderRadius:"var(--border-radius-lg)",border:"1px solid var(--color-border)",boxShadow:"var(--shadow-sm)"},children:[(0,I.jsx)(l.A,{sx:{bgcolor:"var(--color-primary)",width:48,height:48,fontSize:"1.2rem",fontWeight:600},children:(null===W||void 0===W||null===(r=W.name)||void 0===r||null===(o=r.charAt(0))||void 0===o?void 0:o.toUpperCase())||"U"}),(0,I.jsxs)(i.A,{sx:{flex:1,minWidth:0},children:[(0,I.jsx)(s.A,{variant:"body1",sx:{fontWeight:600,color:"var(--color-text-primary)",mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(null===W||void 0===W?void 0:W.name)||"Usuario"}),(0,I.jsx)(d.A,{label:L(null===W||void 0===W?void 0:W.role),color:M(null===W||void 0===W?void 0:W.role),size:"small",sx:{fontWeight:500,"& .MuiChip-label":{px:1}}})]})]})}),(0,I.jsx)(i.A,{sx:{flex:1,overflow:"auto"},children:q.map(((e,r)=>(0,I.jsxs)(i.A,{children:[(0,I.jsx)(c.A,{sx:{px:3,py:1.5,backgroundColor:"transparent",color:"var(--color-text-secondary)",fontWeight:600,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:e.section}),(0,I.jsx)(u.A,{sx:{p:0},children:e.items.filter((e=>e.show)).map((e=>(0,I.jsx)(p.Ay,{sx:{p:0,px:1.5},children:(0,I.jsxs)(m.A,{onClick:()=>{return r=e.path,G(r),void(B&&T(!1));var r},sx:{borderRadius:"var(--border-radius-md)",mx:.5,mb:.5,backgroundColor:U(e.path)?"var(--color-primary)":"transparent",color:U(e.path)?"white":"var(--color-text-primary)","&:hover":{backgroundColor:U(e.path)?"var(--color-primary-dark)":"var(--color-divider)"},transition:"var(--transition-normal)"},children:[(0,I.jsx)(x.A,{sx:{color:U(e.path)?"white":"var(--color-text-secondary)",minWidth:40},children:e.icon}),(0,I.jsx)(h.A,{primary:e.label,primaryTypographyProps:{sx:{fontWeight:U(e.path)?600:500,fontSize:"0.9rem"}}})]})},e.path)))}),r<q.length-1&&(0,I.jsx)(v.A,{sx:{my:1,mx:3}})]},e.section)))}),(0,I.jsxs)(i.A,{sx:{p:2,pt:0},children:[(0,I.jsx)(v.A,{sx:{mb:2}}),(0,I.jsxs)(u.A,{sx:{p:0},children:[(0,I.jsx)(p.Ay,{sx:{p:0},children:(0,I.jsxs)(m.A,{sx:{borderRadius:"var(--border-radius-md)",mx:.5,mb:1,"&:hover":{backgroundColor:"var(--color-divider)"}},children:[(0,I.jsx)(x.A,{sx:{color:"var(--color-text-secondary)",minWidth:40},children:(0,I.jsx)(k.A,{})}),(0,I.jsx)(h.A,{primary:"Configuraci\xf3n",primaryTypographyProps:{sx:{fontWeight:500,fontSize:"0.9rem"}}})]})}),(0,I.jsx)(p.Ay,{sx:{p:0},children:(0,I.jsxs)(m.A,{onClick:()=>{D(),B&&T(!1)},sx:{borderRadius:"var(--border-radius-md)",mx:.5,backgroundColor:"rgba(244, 67, 54, 0.1)",color:"var(--color-error)","&:hover":{backgroundColor:"var(--color-error)",color:"white"},transition:"var(--transition-normal)"},children:[(0,I.jsx)(x.A,{sx:{color:"inherit",minWidth:40},children:(0,I.jsx)(R.A,{})}),(0,I.jsx)(h.A,{primary:"Cerrar Sesi\xf3n",primaryTypographyProps:{sx:{fontWeight:600,fontSize:"0.9rem"}}})]})})]})]})]});return(0,I.jsxs)(i.A,{sx:{display:"flex",minHeight:"100vh"},children:[B&&(0,I.jsx)(A.A,{position:"fixed",sx:{background:"linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%)",zIndex:O.zIndex.drawer+1,boxShadow:"var(--shadow-md)"},children:(0,I.jsxs)(g.A,{children:[(0,I.jsx)(j.A,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:V,sx:{mr:2},children:(0,I.jsx)(N.A,{})}),(0,I.jsx)(s.A,{variant:"h6",sx:{flexGrow:1,fontWeight:600},children:(()=>{if(z)return z;const e=H.pathname;return e.includes("/deposito")?"Dep\xf3sito":e.includes("/compras")?"Compras":e.includes("/calidad")?"Calidad":e.includes("/salida")?"Salida":e.includes("/admin")?"Dashboard":e.includes("/reportes")?"Reportes":"Der Will"})()})]})}),!B&&(0,I.jsx)(i.A,{component:"nav",sx:{width:280,flexShrink:0,backgroundColor:"var(--color-surface)",borderRight:"1px solid var(--color-border)",boxShadow:"var(--shadow-sm)"},children:K}),B&&(0,I.jsx)(b.Ay,{variant:"temporary",open:F,onClose:V,ModalProps:{keepMounted:!0},sx:{display:{xs:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:280,backgroundColor:"var(--color-surface)",border:"none"}},children:K}),(0,I.jsx)(i.A,{component:"main",sx:{flexGrow:1,backgroundColor:"var(--color-background)",minHeight:"100vh",pt:B?"64px":0},children:P})]})}},1088:(e,r,o)=>{o.d(r,{A:()=>p});o(5043);var t=o(6240),a=o(344),n=o(2110),i=o(9958),s=o(5865),l=o(6494),d=o(6446),c=o(7600),u=o(579);const p=e=>{let{title:r,subtitle:o,children:p,actions:m,elevation:x=1,padding:h="normal",headerAction:v,className:A,...g}=e;const j=(0,t.A)(),b=(0,a.A)(j.breakpoints.down("sm"));(0,a.A)(j.breakpoints.down("md"));return(0,u.jsxs)(n.A,{elevation:x,sx:{backgroundColor:"var(--color-surface)",borderRadius:"var(--border-radius-lg)",border:"1px solid var(--color-border)",transition:"var(--transition-normal)",width:"100%",maxWidth:"100%","&:hover":{boxShadow:"var(--shadow-md)",transform:"translateY(-2px)"},...g.sx},className:A,...g,children:[(r||o)&&(0,u.jsx)(i.A,{title:(0,u.jsx)(s.A,{variant:b?"h6":"h5",sx:{fontWeight:600,color:"var(--color-text-primary)",mb:o?.5:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r}),subheader:o&&(0,u.jsx)(s.A,{variant:"body2",sx:{color:"var(--color-text-secondary)",lineHeight:1.4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o}),action:v,sx:{pb:1,"& .MuiCardHeader-content":{minWidth:0},"& .MuiCardHeader-action":{flexShrink:0}}}),(0,u.jsx)(l.A,{sx:{...(()=>{switch(h){case"compact":return{p:2};case"comfortable":return{p:4};case"none":return{p:0};default:return{p:3}}})(),pt:r||o?0:void 0,width:"100%",maxWidth:"100%"},children:(0,u.jsx)(d.A,{sx:{width:"100%",maxWidth:"100%"},children:p})}),m&&(0,u.jsx)(c.A,{sx:{p:3,pt:0,gap:1,flexWrap:"wrap",width:"100%",maxWidth:"100%"},children:m})]})}},9414:(e,r,o)=>{o.d(r,{I:()=>l});var t=o(5043);const a="SearchBar_searchBar__f6TOI",n="SearchBar_input__9q6Hv",i="SearchBar_clearButton__MnWnx";var s=o(579);const l=e=>{let{placeholder:r="Buscar...",onSearch:o,debounceMs:l=300}=e;const[d,c]=(0,t.useState)("");return(0,s.jsxs)("div",{className:a,children:[(0,s.jsx)("input",{type:"text",value:d,onChange:e=>{const r=e.target.value;c(r),clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout((()=>{o(r)}),l)},placeholder:r,className:n}),d&&(0,s.jsx)("button",{onClick:()=>{c(""),o("")},className:i,title:"Limpiar b\xfasqueda",children:"\u2715"})]})}},3471:(e,r,o)=>{var t=o(4994);r.A=void 0;var a=t(o(39)),n=o(579);r.A=(0,a.default)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},1337:(e,r,o)=>{var t=o(4994);r.A=void 0;var a=t(o(39)),n=o(579);r.A=(0,a.default)((0,n.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},141:(e,r,o)=>{o.d(r,{A:()=>n});var t=o(9662),a=o(579);const n=(0,t.A)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},39:(e,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=o(4421)},279:(e,r,o)=>{o.d(r,{A:()=>S});var t=o(8587),a=o(8168),n=o(5043),i=o(8387),s=o(9998),l=o(9303),d=o(8610),c=o(4535),u=o(6431),p=o(4318),m=o(653),x=o(6240),h=o(5849),v=o(2532),A=o(2372);function g(e){return(0,A.Ay)("MuiCollapse",e)}(0,v.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var j=o(579);const b=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],f=(0,c.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[r.root,r[o.orientation],"entered"===o.state&&r.entered,"exited"===o.state&&!o.in&&"0px"===o.collapsedSize&&r.hidden]}})((e=>{let{theme:r,ownerState:o}=e;return(0,a.A)({height:0,overflow:"hidden",transition:r.transitions.create("height")},"horizontal"===o.orientation&&{height:"auto",width:0,transition:r.transitions.create("width")},"entered"===o.state&&(0,a.A)({height:"auto",overflow:"visible"},"horizontal"===o.orientation&&{width:"auto"}),"exited"===o.state&&!o.in&&"0px"===o.collapsedSize&&{visibility:"hidden"})})),y=(0,c.Ay)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,r)=>r.wrapper})((e=>{let{ownerState:r}=e;return(0,a.A)({display:"flex",width:"100%"},"horizontal"===r.orientation&&{width:"auto",height:"100%"})})),C=(0,c.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,r)=>r.wrapperInner})((e=>{let{ownerState:r}=e;return(0,a.A)({width:"100%"},"horizontal"===r.orientation&&{width:"auto",height:"100%"})})),w=n.forwardRef((function(e,r){const o=(0,u.b)({props:e,name:"MuiCollapse"}),{addEndListener:c,children:v,className:A,collapsedSize:w="0px",component:S,easing:_,in:k,onEnter:R,onEntered:N,onEntering:E,onExit:M,onExited:L,onExiting:I,orientation:P="vertical",style:W,timeout:D=p.p0.standard,TransitionComponent:z=s.Ay}=o,F=(0,t.A)(o,b),T=(0,a.A)({},o,{orientation:P,collapsedSize:w}),O=(e=>{const{orientation:r,classes:o}=e,t={root:["root","".concat(r)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(r)],wrapperInner:["wrapperInner","".concat(r)]};return(0,d.A)(t,g,o)})(T),B=(0,x.A)(),G=(0,l.A)(),H=n.useRef(null),V=n.useRef(),q="number"===typeof w?"".concat(w,"px"):w,U="horizontal"===P,K=U?"width":"height",Z=n.useRef(null),X=(0,h.A)(r,Z),J=e=>r=>{if(e){const o=Z.current;void 0===r?e(o):e(o,r)}},Q=()=>H.current?H.current[U?"clientWidth":"clientHeight"]:0,Y=J(((e,r)=>{H.current&&U&&(H.current.style.position="absolute"),e.style[K]=q,R&&R(e,r)})),$=J(((e,r)=>{const o=Q();H.current&&U&&(H.current.style.position="");const{duration:t,easing:a}=(0,m.c)({style:W,timeout:D,easing:_},{mode:"enter"});if("auto"===D){const r=B.transitions.getAutoHeightDuration(o);e.style.transitionDuration="".concat(r,"ms"),V.current=r}else e.style.transitionDuration="string"===typeof t?t:"".concat(t,"ms");e.style[K]="".concat(o,"px"),e.style.transitionTimingFunction=a,E&&E(e,r)})),ee=J(((e,r)=>{e.style[K]="auto",N&&N(e,r)})),re=J((e=>{e.style[K]="".concat(Q(),"px"),M&&M(e)})),oe=J(L),te=J((e=>{const r=Q(),{duration:o,easing:t}=(0,m.c)({style:W,timeout:D,easing:_},{mode:"exit"});if("auto"===D){const o=B.transitions.getAutoHeightDuration(r);e.style.transitionDuration="".concat(o,"ms"),V.current=o}else e.style.transitionDuration="string"===typeof o?o:"".concat(o,"ms");e.style[K]=q,e.style.transitionTimingFunction=t,I&&I(e)}));return(0,j.jsx)(z,(0,a.A)({in:k,onEnter:Y,onEntered:ee,onEntering:$,onExit:re,onExited:oe,onExiting:te,addEndListener:e=>{"auto"===D&&G.start(V.current||0,e),c&&c(Z.current,e)},nodeRef:Z,timeout:"auto"===D?null:D},F,{children:(e,r)=>(0,j.jsx)(f,(0,a.A)({as:S,className:(0,i.A)(O.root,A,{entered:O.entered,exited:!k&&"0px"===q&&O.hidden}[e]),style:(0,a.A)({[U?"minWidth":"minHeight"]:q},W),ref:X},r,{ownerState:(0,a.A)({},T,{state:e}),children:(0,j.jsx)(y,{ownerState:(0,a.A)({},T,{state:e}),className:O.wrapper,ref:H,children:(0,j.jsx)(C,{ownerState:(0,a.A)({},T,{state:e}),className:O.wrapperInner,children:v})})}))}))}));w.muiSupportAuto=!0;const S=w},4421:(e,r,o)=>{o.r(r),o.d(r,{capitalize:()=>a.A,createChainedFunction:()=>n,createSvgIcon:()=>i.A,debounce:()=>s.A,deprecatedPropType:()=>l,isMuiElement:()=>d.A,ownerDocument:()=>c.A,ownerWindow:()=>u.A,requirePropFactory:()=>p,setRef:()=>m,unstable_ClassNameGenerator:()=>f,unstable_useEnhancedEffect:()=>x.A,unstable_useId:()=>h.A,unsupportedProp:()=>v,useControlled:()=>A.A,useEventCallback:()=>g.A,useForkRef:()=>j.A,useIsFocusVisible:()=>b.A});var t=o(9386),a=o(6803);const n=o(2456).A;var i=o(9662),s=o(950);const l=function(e,r){return()=>null};var d=o(7328),c=o(2427),u=o(6078);o(8168);const p=function(e,r){return()=>null};const m=o(6564).A;var x=o(5013),h=o(5879);const v=function(e,r,o,t,a){return null};var A=o(4516),g=o(3319),j=o(5849),b=o(7844);const f={configure:e=>{t.A.configure(e)}}},5879:(e,r,o)=>{o.d(r,{A:()=>t});const t=o(5844).A}}]);
//# sourceMappingURL=26.ea3b09dc.chunk.js.map