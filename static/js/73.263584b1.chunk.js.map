{"version":3,"file":"static/js/73.263584b1.chunk.js","mappings":"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","sources":["shared/ui/PosicionCard/PosicionCard.jsx","widgets/PosicionList/PosicionList.jsx","webpack://depositodwfront/./src/widgets/remitos/AdicionRapidaForm/AdicionRapidaForm.module.css?c71f","widgets/remitos/AdicionRapidaForm/AdicionRapidaForm.jsx","widgets/remitos/MovimientoInternoForm/MovimientoInternoForm.jsx","widgets/remitos/CorreccionForm/CorreccionForm.jsx","pages/DepositoPage/DepositoPage.jsx","features/stock/utils/navigationUtils.js"],"sourcesContent":["import React, { useState, useMemo } from \"react\";\r\nimport { \r\n  Button, \r\n  Box, \r\n  Typography, \r\n  Chip, \r\n  IconButton,\r\n  Collapse,\r\n  useTheme,\r\n  useMediaQuery\r\n} from \"@mui/material\";\r\nimport { \r\n  Add as AddIcon,\r\n  SwapHoriz as SwapIcon,\r\n  Edit as EditIcon,\r\n  ExpandMore as ExpandMoreIcon,\r\n  ExpandLess as ExpandLessIcon\r\n} from \"@mui/icons-material\";\r\nimport { generatePosicionTitle, calculatePosicionTotalKilos, calculatePosicionTotalUnidades } from \"../../../features/stock/utils/posicionUtils\";\r\n\r\nexport const PosicionCard = React.memo(({ \r\n  posicion, \r\n  onClick,\r\n  onAdicionRapida,\r\n  onMovimientoInterno,\r\n  onCorreccion,\r\n  searchTerm = \"\",\r\n  children \r\n}) => {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\r\n  const isTablet = useMediaQuery(theme.breakpoints.down('md'));\r\n  \r\n  const titulo = generatePosicionTitle(posicion);\r\n  \r\n  // Filtrar items según el término de búsqueda\r\n  const filteredItems = useMemo(() => {\r\n    if (!searchTerm.trim() || !posicion.items) {\r\n      return posicion.items || [];\r\n    }\r\n\r\n    const searchWords = searchTerm.toLowerCase().trim().split(/\\s+/);\r\n    \r\n    return posicion.items.filter(item => {\r\n      const searchableText = [\r\n        item.categoria || '',\r\n        item.descripcion || '',\r\n        item.partida || '',\r\n        item.proveedor?.nombre || ''\r\n      ].join(' ').toLowerCase();\r\n      \r\n      // Verificar si TODAS las palabras están presentes en el texto del item\r\n      return searchWords.every(word => searchableText.includes(word));\r\n    });\r\n  }, [posicion.items, searchTerm]);\r\n\r\n  // Calcular totales solo con los items filtrados\r\n  const totalKilos = useMemo(() => {\r\n    return filteredItems.reduce((sum, item) => sum + (item.kilos || 0), 0);\r\n  }, [filteredItems]);\r\n\r\n  const totalUnidades = useMemo(() => {\r\n    return filteredItems.reduce((sum, item) => sum + (item.unidades || 0), 0);\r\n  }, [filteredItems]);\r\n\r\n  const handleCardClick = (e) => {\r\n    e.stopPropagation();\r\n    onClick?.(posicion);\r\n  };\r\n\r\n  const handleExpandClick = (e) => {\r\n    e.stopPropagation();\r\n    setIsExpanded(!isExpanded);\r\n  };\r\n\r\n  const handleAdicionRapida = (e) => {\r\n    e.stopPropagation();\r\n    onAdicionRapida?.(posicion);\r\n  };\r\n\r\n  const handleMovimientoInterno = (e, item) => {\r\n    e.stopPropagation();\r\n    onMovimientoInterno?.(item, posicion);\r\n  };\r\n\r\n  const handleCorreccion = (e, item) => {\r\n    e.stopPropagation();\r\n    onCorreccion?.(item, posicion);\r\n  };\r\n\r\n  const hasMoreItems = filteredItems.length > (isMobile ? 2 : 3);\r\n\r\n  // Si no hay items filtrados y hay término de búsqueda, no mostrar la tarjeta\r\n  if (searchTerm.trim() && filteredItems.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        backgroundColor: 'var(--color-surface)',\r\n        borderRadius: 'var(--border-radius-md)',\r\n        border: '1px solid var(--color-border)',\r\n        p: isMobile ? 1.5 : 2,\r\n        mb: 2,\r\n        cursor: 'pointer',\r\n        transition: 'var(--transition-normal)',\r\n        '&:hover': {\r\n          boxShadow: 'var(--shadow-md)',\r\n          transform: 'translateY(-1px)'\r\n        }\r\n      }}\r\n      onClick={handleCardClick}\r\n    >\r\n      {/* Header con título y botón de adición rápida */}\r\n      <Box sx={{ \r\n        display: 'flex', \r\n        justifyContent: 'space-between', \r\n        alignItems: 'center',\r\n        mb: 1.5\r\n      }}>\r\n        <Typography \r\n          variant={isMobile ? \"body2\" : \"h6\"} \r\n          sx={{ \r\n            fontWeight: 600,\r\n            color: 'var(--color-text-primary)',\r\n            flex: 1\r\n          }}\r\n        >\r\n          {titulo}\r\n        </Typography>\r\n        \r\n        <Box sx={{ display: 'flex', gap: 0.5 }}>\r\n          {/* Botón de Adición Rápida */}\r\n          <IconButton\r\n            size=\"small\"\r\n            onClick={handleAdicionRapida}\r\n            sx={{ \r\n              color: 'var(--color-primary)',\r\n              backgroundColor: 'rgba(46, 125, 50, 0.1)',\r\n              '&:hover': {\r\n                backgroundColor: 'var(--color-primary)',\r\n                color: 'white'\r\n              },\r\n              p: 0.5\r\n            }}\r\n          >\r\n            <AddIcon fontSize=\"small\" />\r\n          </IconButton>\r\n          \r\n          {/* Botón de expandir */}\r\n          {hasMoreItems && (\r\n            <IconButton\r\n              size=\"small\"\r\n              onClick={handleExpandClick}\r\n              sx={{ \r\n                color: 'var(--color-text-secondary)',\r\n                p: 0.5\r\n              }}\r\n            >\r\n              {isExpanded ? <ExpandLessIcon /> : <ExpandMoreIcon />}\r\n            </IconButton>\r\n          )}\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Items visibles */}\r\n      <Box sx={{ mb: 1.5 }}>\r\n        {filteredItems.slice(0, isMobile ? 2 : 3).map((item, index) => (\r\n          <Box\r\n            key={index}\r\n            sx={{\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'flex-start',\r\n              py: 1,\r\n              borderBottom: index < (isMobile ? 1 : 2) ? '1px solid var(--color-divider)' : 'none'\r\n            }}\r\n          >\r\n            <Box sx={{ flex: 1, minWidth: 0 }}>\r\n              {/* Título del item con proveedor, categoría y descripción en una línea */}\r\n              <Typography \r\n                variant={isMobile ? \"caption\" : \"body2\"}\r\n                sx={{ \r\n                  fontWeight: 600,\r\n                  color: 'var(--color-text-primary)',\r\n                  mb: 0.5,\r\n                  lineHeight: 1.3\r\n                }}\r\n              >\r\n                {item.proveedor?.nombre && (\r\n                  <Box component=\"span\" sx={{ color: 'var(--color-secondary)', fontWeight: 500 }}>\r\n                    {item.proveedor.nombre} - \r\n                  </Box>\r\n                )}\r\n                {item.categoria && `${item.categoria} - `}{item.descripcion || 'Sin descripción'}\r\n              </Typography>\r\n              \r\n              {/* Pesos y unidades */}\r\n              <Typography \r\n                variant=\"caption\"\r\n                sx={{ \r\n                  color: 'var(--color-text-secondary)',\r\n                  display: 'block'\r\n                }}\r\n              >\r\n                {item.kilos?.toFixed(1)} kg • {item.unidades} uds\r\n                {item.partida && ` • P: ${item.partida}`}\r\n              </Typography>\r\n            </Box>\r\n            \r\n            {/* Acciones por item */}\r\n            <Box sx={{ display: 'flex', gap: 0.5, ml: 1, mt: 0.5 }}>\r\n              <IconButton\r\n                size=\"small\"\r\n                onClick={(e) => handleMovimientoInterno(e, item)}\r\n                sx={{ \r\n                  color: 'var(--color-secondary)',\r\n                  p: 0.5\r\n                }}\r\n              >\r\n                <SwapIcon fontSize=\"small\" />\r\n              </IconButton>\r\n              <IconButton\r\n                size=\"small\"\r\n                onClick={(e) => handleCorreccion(e, item)}\r\n                sx={{ \r\n                  color: 'var(--color-warning)',\r\n                  p: 0.5\r\n                }}\r\n              >\r\n                <EditIcon fontSize=\"small\" />\r\n              </IconButton>\r\n            </Box>\r\n          </Box>\r\n        ))}\r\n      </Box>\r\n\r\n      {/* Items expandidos */}\r\n      <Collapse in={isExpanded}>\r\n        <Box sx={{ mt: 1 }}>\r\n          {filteredItems.slice(isMobile ? 2 : 3).map((item, index) => (\r\n            <Box\r\n              key={`expanded-${index}`}\r\n              sx={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'flex-start',\r\n                py: 1,\r\n                borderBottom: index < (filteredItems.length - (isMobile ? 2 : 3) - 1) ? '1px solid var(--color-divider)' : 'none'\r\n              }}\r\n            >\r\n              <Box sx={{ flex: 1, minWidth: 0 }}>\r\n                {/* Título del item con proveedor, categoría y descripción en una línea */}\r\n                <Typography \r\n                  variant=\"caption\"\r\n                  sx={{ \r\n                    fontWeight: 600,\r\n                    color: 'var(--color-text-primary)',\r\n                    mb: 0.5,\r\n                    lineHeight: 1.3\r\n                  }}\r\n                >\r\n                  {item.proveedor?.nombre && (\r\n                    <Box component=\"span\" sx={{ color: 'var(--color-secondary)', fontWeight: 500 }}>\r\n                      {item.proveedor.nombre} - \r\n                    </Box>\r\n                  )}\r\n                  {item.categoria && `${item.categoria} - `}{item.descripcion || 'Sin descripción'}\r\n                </Typography>\r\n                \r\n                {/* Pesos y unidades */}\r\n                <Typography \r\n                  variant=\"caption\"\r\n                  sx={{ \r\n                    color: 'var(--color-text-secondary)',\r\n                    display: 'block'\r\n                  }}\r\n                >\r\n                  {item.kilos?.toFixed(1)} kg • {item.unidades} uds\r\n                  {item.partida && ` • P: ${item.partida}`}\r\n                </Typography>\r\n              </Box>\r\n              \r\n              <Box sx={{ display: 'flex', gap: 0.5, ml: 1, mt: 0.5 }}>\r\n                <IconButton\r\n                  size=\"small\"\r\n                  onClick={(e) => handleMovimientoInterno(e, item)}\r\n                  sx={{ \r\n                    color: 'var(--color-secondary)',\r\n                    p: 0.5\r\n                  }}\r\n                >\r\n                  <SwapIcon fontSize=\"small\" />\r\n                </IconButton>\r\n                <IconButton\r\n                  size=\"small\"\r\n                  onClick={(e) => handleCorreccion(e, item)}\r\n                  sx={{ \r\n                    color: 'var(--color-warning)',\r\n                    p: 0.5\r\n                  }}\r\n                >\r\n                  <EditIcon fontSize=\"small\" />\r\n                </IconButton>\r\n              </Box>\r\n            </Box>\r\n          ))}\r\n        </Box>\r\n      </Collapse>\r\n\r\n      {children}\r\n    </Box>\r\n  );\r\n}); ","import React from \"react\";\r\nimport { Box, Typography, useTheme, useMediaQuery } from \"@mui/material\";\r\nimport { PosicionCard } from \"../../shared/ui/PosicionCard/PosicionCard\";\r\n\r\nexport const PosicionList = ({ \r\n  posiciones, \r\n  onPosicionClick,\r\n  onAdicionRapida,\r\n  onMovimientoInterno,\r\n  onCorreccion,\r\n  searchTerm = \"\"\r\n}) => {\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\r\n\r\n  if (posiciones.length === 0) {\r\n    return (\r\n      <Box sx={{ \r\n        textAlign: 'center', \r\n        py: 4,\r\n        color: 'var(--color-text-secondary)'\r\n      }}>\r\n        <Typography variant={isMobile ? \"body2\" : \"h6\"}>\r\n          No se encontraron posiciones\r\n        </Typography>\r\n        {searchTerm && (\r\n          <Typography variant=\"caption\" sx={{ mt: 1, display: 'block' }}>\r\n            Intenta con otros términos de búsqueda\r\n          </Typography>\r\n        )}\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ \r\n      display: 'flex', \r\n      flexDirection: 'column',\r\n      gap: isMobile ? 1 : 2\r\n    }}>\r\n      {posiciones.map((posicion, index) => {\r\n        // Crear una key única basada en los datos disponibles\r\n        const uniqueKey = posicion.posicionId || `posicion-${index}`;\r\n          \r\n        return (\r\n          <PosicionCard\r\n            key={uniqueKey}\r\n            posicion={posicion}\r\n            onClick={onPosicionClick}\r\n            onAdicionRapida={onAdicionRapida}\r\n            onMovimientoInterno={onMovimientoInterno}\r\n            onCorreccion={onCorreccion}\r\n            searchTerm={searchTerm}\r\n          />\r\n        );\r\n      })}\r\n    </Box>\r\n  );\r\n}; ","// extracted by mini-css-extract-plugin\nexport default {\"formContainer\":\"AdicionRapidaForm_formContainer__kFQuD\",\"formField\":\"AdicionRapidaForm_formField__MLSrF\",\"errorMessage\":\"AdicionRapidaForm_errorMessage__vvUcA\",\"loadingSpinner\":\"AdicionRapidaForm_loadingSpinner__LQ2my\",\"submitButton\":\"AdicionRapidaForm_submitButton__NS052\",\"cancelButton\":\"AdicionRapidaForm_cancelButton__AuB8K\"};","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { \r\n  Dialog, \r\n  DialogTitle, \r\n  DialogContent, \r\n  DialogActions, \r\n  Button, \r\n  TextField, \r\n  FormControl, \r\n  InputLabel, \r\n  Select, \r\n  MenuItem, \r\n  Box,\r\n  Typography,\r\n  Alert,\r\n  Autocomplete\r\n} from '@mui/material';\r\nimport { dataProveedoresItems } from '../../../features/remitos/model/slice';\r\nimport axios from 'axios';\r\nimport styles from './AdicionRapidaForm.module.css';\r\n\r\nconst URL = \"https://derwill-deposito-backend.onrender.com\";\r\n\r\n// Categorías para nuevos items\r\nconst CATEGORIAS = [\r\n  \"costura\", \"algodon\", \"algodon-color\", \"nylon\", \"nylon REC\", \"nylon-color\", \"lycra\", \"lycra REC\", \r\n  \"goma\", \"tarugo\", \"etiqueta\", \"bolsa\", \"percha\", \"ribbon\", \"caja\", \r\n  \"cinta\", \"plantilla\", \"film\", \"consumibes(aceite y parafina)\", \"faja\", \"caballete\"\r\n];\r\n\r\n// Modal para crear nuevo proveedor\r\nconst ModalNuevoProveedor = ({ open, onClose, onProveedorCreado }) => {\r\n  const [nombreProveedor, setNombreProveedor] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!nombreProveedor.trim()) {\r\n      alert('Por favor ingrese un nombre de proveedor');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.post(`${URL}/proveedores`, {\r\n        nombre: nombreProveedor,\r\n        categoria: \"proveedor\"\r\n      });\r\n      \r\n      onProveedorCreado(response.data);\r\n      setNombreProveedor('');\r\n      onClose();\r\n    } catch (error) {\r\n      alert('Error al crear el proveedor');\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose}>\r\n      <DialogTitle>Agregar Nuevo Proveedor</DialogTitle>\r\n      <DialogContent>\r\n        <TextField\r\n          autoFocus\r\n          margin=\"dense\"\r\n          label=\"Nombre del Proveedor\"\r\n          type=\"text\"\r\n          fullWidth\r\n          value={nombreProveedor}\r\n          onChange={(e) => setNombreProveedor(e.target.value)}\r\n        />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose} color=\"primary\">\r\n          Cancelar\r\n        </Button>\r\n        <Button \r\n          onClick={handleSubmit} \r\n          color=\"primary\"\r\n          disabled={loading}\r\n        >\r\n          Guardar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\n// Modal para crear nuevo item\r\nconst ModalNuevoItem = ({ open, onClose, proveedor, onItemCreado }) => {\r\n  const [nuevoItem, setNuevoItem] = useState({\r\n    descripcion: \"\",\r\n    categoria: \"\"\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!nuevoItem.descripcion || !nuevoItem.categoria) {\r\n      alert('Por favor complete todos los campos');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.post(`${URL}/items`, {\r\n        descripcion: nuevoItem.descripcion,\r\n        categoria: nuevoItem.categoria,\r\n        proveedor: proveedor\r\n      });\r\n\r\n      onItemCreado(response.data);\r\n      setNuevoItem({ descripcion: \"\", categoria: \"\" });\r\n      onClose();\r\n    } catch (error) {\r\n      alert('Error al crear el item');\r\n      console.error(error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose}>\r\n      <DialogTitle>Agregar Nuevo Item</DialogTitle>\r\n      <DialogContent>\r\n        <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 2 }}>\r\n          <FormControl fullWidth>\r\n            <InputLabel>Categoría</InputLabel>\r\n            <Select\r\n              value={nuevoItem.categoria}\r\n              label=\"Categoría\"\r\n              onChange={(e) => setNuevoItem({...nuevoItem, categoria: e.target.value})}\r\n            >\r\n              {CATEGORIAS.map((cat) => (\r\n                <MenuItem key={cat} value={cat}>{cat}</MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n          \r\n          <TextField\r\n            label=\"Descripción\"\r\n            value={nuevoItem.descripcion}\r\n            onChange={(e) => setNuevoItem({...nuevoItem, descripcion: e.target.value})}\r\n            fullWidth\r\n            required\r\n          />\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose}>Cancelar</Button>\r\n        <Button onClick={handleSubmit} disabled={loading}>\r\n          Guardar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport const AdicionRapidaForm = ({ open, onClose, posicion, onSubmit }) => {\r\n  const dispatch = useDispatch();\r\n  const proveedores = useSelector((state) => state.remitos.proveedores);\r\n  const allItems = useSelector((state) => state.remitos.items || []);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    proveedor: '',\r\n    item: '',\r\n    kilos: '',\r\n    unidades: '',\r\n    partida: '',\r\n    tipoMovimiento: 'ajusteSUMA'\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  \r\n  // Estados para los modales\r\n  const [openNuevoProveedor, setOpenNuevoProveedor] = useState(false);\r\n  const [openNuevoItem, setOpenNuevoItem] = useState(false);\r\n\r\n  // Filtrar items por proveedor seleccionado\r\n  const itemsProveedor = formData.proveedor \r\n    ? allItems.filter(item => item.proveedor?.id === formData.proveedor.id)\r\n    : [];\r\n\r\n  // Cargar proveedores cuando se abra el modal\r\n  useEffect(() => {\r\n    if (open && (!proveedores || proveedores.length === 0)) {\r\n      dispatch(dataProveedoresItems());\r\n    }\r\n  }, [open, dispatch, proveedores]);\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleProveedorCreado = (nuevoProveedor) => {\r\n    dispatch(dataProveedoresItems());\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      proveedor: nuevoProveedor\r\n    }));\r\n  };\r\n\r\n  const handleItemCreado = (nuevoItem) => {\r\n    dispatch(dataProveedoresItems());\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      item: nuevoItem\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    // Validación básica\r\n    if (!formData.proveedor || !formData.item || !formData.partida || \r\n        !formData.kilos || !formData.unidades) {\r\n      setError('Por favor complete todos los campos');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const adicionData = {\r\n        proveedor: formData.proveedor,\r\n        tipoMovimiento: formData.tipoMovimiento,\r\n        item: {\r\n          itemId: formData.item.id,\r\n          categoria: formData.item.categoria,\r\n          descripcion: formData.item.descripcion,\r\n          proveedor: formData.item.proveedor,\r\n          partida: formData.partida,\r\n          kilos: 0,\r\n          unidades: 0\r\n        },\r\n        kilos: parseInt(formData.kilos),\r\n        unidades: parseInt(formData.unidades),\r\n        partida: formData.partida,\r\n        posicion: posicion?.id || posicion?.posicionId || ''\r\n      };\r\n\r\n      onSubmit(adicionData);\r\n      onClose();\r\n      setFormData({\r\n        proveedor: '',\r\n        item: '',\r\n        kilos: '',\r\n        unidades: '',\r\n        partida: '',\r\n        tipoMovimiento: 'ajusteSUMA'\r\n      });\r\n    } catch (error) {\r\n      setError('Error al agregar el item. Por favor intente nuevamente.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!loading) {\r\n      onClose();\r\n      setFormData({\r\n        proveedor: '',\r\n        item: '',\r\n        kilos: '',\r\n        unidades: '',\r\n        partida: '',\r\n        tipoMovimiento: 'ajusteSUMA'\r\n      });\r\n      setError('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Dialog open={open} onClose={handleClose} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>\r\n          Adición Rápida - {posicion?.pasillo \r\n            ? `Pasillo ${posicion.pasillo}`\r\n            : `Rack ${posicion?.rack} - Fila ${posicion?.fila} - Nivel ${posicion?.AB}`\r\n          }\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ mt: 2, display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n            {error && (\r\n              <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n                {error}\r\n              </Alert>\r\n            )}\r\n            \r\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n              <Autocomplete\r\n                options={proveedores || []}\r\n                getOptionLabel={(option) => option ? option.nombre || '' : ''}\r\n                value={formData.proveedor}\r\n                onChange={(event, newValue) => handleInputChange('proveedor', newValue)}\r\n                renderInput={(params) => (\r\n                  <TextField\r\n                    {...params}\r\n                    label=\"Proveedor\"\r\n                    required\r\n                    placeholder=\"Buscar proveedor...\"\r\n                  />\r\n                )}\r\n                renderOption={(props, option) => (\r\n                  <Box component=\"li\" {...props}>\r\n                    {option.nombre}\r\n                  </Box>\r\n                )}\r\n                noOptionsText=\"No se encontraron proveedores\"\r\n                loading={!proveedores || proveedores.length === 0}\r\n                loadingText=\"Cargando proveedores...\"\r\n                filterOptions={(options, { inputValue }) => {\r\n                  const filtered = options.filter(option =>\r\n                    option.nombre.toLowerCase().includes(inputValue.toLowerCase())\r\n                  );\r\n                  return filtered;\r\n                }}\r\n              />\r\n              <Button \r\n                size=\"small\" \r\n                onClick={() => setOpenNuevoProveedor(true)}\r\n                sx={{ \r\n                  color: '#2ecc71', \r\n                  alignSelf: 'flex-start',\r\n                  textTransform: 'none'\r\n                }}\r\n              >\r\n                + Agregar nuevo proveedor\r\n              </Button>\r\n            </Box>\r\n            \r\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n              <Autocomplete\r\n                options={itemsProveedor}\r\n                getOptionLabel={(option) => option ? `${option.categoria || ''} - ${option.descripcion || ''}` : ''}\r\n                value={formData.item}\r\n                onChange={(event, newValue) => handleInputChange('item', newValue)}\r\n                renderInput={(params) => (\r\n                  <TextField\r\n                    {...params}\r\n                    label=\"Item\"\r\n                    required\r\n                    placeholder=\"Buscar item...\"\r\n                    disabled={!formData.proveedor}\r\n                  />\r\n                )}\r\n                renderOption={(props, option) => (\r\n                  <Box component=\"li\" {...props}>\r\n                    <Box>\r\n                      <Typography variant=\"body2\" fontWeight=\"bold\">\r\n                        {option.categoria}\r\n                      </Typography>\r\n                      <Typography variant=\"body2\" color=\"textSecondary\">\r\n                        {option.descripcion}\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n                )}\r\n                noOptionsText={\r\n                  formData.proveedor ? \"No se encontraron items\" : \"Seleccione un proveedor primero\"\r\n                }\r\n                filterOptions={(options, { inputValue }) => {\r\n                  const filtered = options.filter(option =>\r\n                    option.categoria.toLowerCase().includes(inputValue.toLowerCase()) ||\r\n                    option.descripcion.toLowerCase().includes(inputValue.toLowerCase())\r\n                  );\r\n                  return filtered;\r\n                }}\r\n              />\r\n              {formData.proveedor && (\r\n                <Button \r\n                  size=\"small\" \r\n                  onClick={() => setOpenNuevoItem(true)}\r\n                  sx={{ \r\n                    color: '#2ecc71', \r\n                    alignSelf: 'flex-start',\r\n                    textTransform: 'none'\r\n                  }}\r\n                >\r\n                  + Agregar nuevo item\r\n                </Button>\r\n              )}\r\n            </Box>\r\n            \r\n            <TextField\r\n              fullWidth\r\n              label=\"Partida\"\r\n              value={formData.partida}\r\n              onChange={(e) => handleInputChange('partida', e.target.value)}\r\n              required\r\n            />\r\n            \r\n            <Box sx={{ display: 'flex', gap: 2 }}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Kilos\"\r\n                type=\"number\"\r\n                inputProps={{ step: 1, min: 0 }}\r\n                value={formData.kilos}\r\n                onChange={(e) => {\r\n                  const value = e.target.value;\r\n                  if (value === '' || /^\\d+$/.test(value)) {\r\n                    handleInputChange('kilos', value);\r\n                  }\r\n                }}\r\n                required\r\n              />\r\n              \r\n              <TextField\r\n                fullWidth\r\n                label=\"Unidades\"\r\n                type=\"number\"\r\n                inputProps={{ step: 1, min: 0 }}\r\n                value={formData.unidades}\r\n                onChange={(e) => {\r\n                  const value = e.target.value;\r\n                  if (value === '' || /^\\d+$/.test(value)) {\r\n                    handleInputChange('unidades', value);\r\n                  }\r\n                }}\r\n                required\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} disabled={loading}>\r\n            Cancelar\r\n          </Button>\r\n          <Button \r\n            onClick={handleSubmit} \r\n            variant=\"contained\" \r\n            disabled={loading}\r\n          >\r\n            {loading ? 'Agregando...' : 'Agregar'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      <ModalNuevoProveedor \r\n        open={openNuevoProveedor}\r\n        onClose={() => setOpenNuevoProveedor(false)}\r\n        onProveedorCreado={handleProveedorCreado}\r\n      />\r\n\r\n      <ModalNuevoItem \r\n        open={openNuevoItem}\r\n        onClose={() => setOpenNuevoItem(false)}\r\n        proveedor={formData.proveedor}\r\n        onItemCreado={handleItemCreado}\r\n      />\r\n    </>\r\n  );\r\n}; ","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Dialog, \r\n  DialogTitle, \r\n  DialogContent, \r\n  DialogActions, \r\n  Button, \r\n  TextField, \r\n  FormControl, \r\n  InputLabel, \r\n  Select, \r\n  MenuItem, \r\n  Box,\r\n  Typography,\r\n  Alert,\r\n  Chip,\r\n  Divider,\r\n  useTheme,\r\n  useMediaQuery,\r\n  IconButton\r\n} from '@mui/material';\r\nimport { \r\n  SwapHoriz as SwapIcon,\r\n  LocationOn as LocationIcon,\r\n  Inventory as InventoryIcon,\r\n  Close as CloseIcon\r\n} from '@mui/icons-material';\r\nimport ModernCard from '../../../shared/ui/ModernCard/ModernCard';\r\n\r\nexport const MovimientoInternoForm = ({ \r\n  open, \r\n  onClose, \r\n  item,\r\n  posicionOrigen,\r\n  onSubmit \r\n}) => {\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\r\n  \r\n  const [formData, setFormData] = useState({\r\n    rack: '',\r\n    fila: '',\r\n    nivel: '',\r\n    pasillo: '',\r\n    unidades: '',\r\n    kilos: ''\r\n  });\r\n  \r\n  const [errors, setErrors] = useState({});\r\n  const [locationType, setLocationType] = useState('rack'); // 'rack' o 'pasillo'\r\n\r\n  useEffect(() => {\r\n    if (open && item) {\r\n      resetForm();\r\n    }\r\n  }, [open, item]);\r\n  \r\n  useEffect(() => {\r\n    if (open && (!item || !posicionOrigen)) {\r\n      const timer = setTimeout(() => {\r\n        onClose();\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [open, item, posicionOrigen, onClose]);\r\n\r\n  if (!open) return null;\r\n  \r\n  if (!item || !posicionOrigen) {\r\n    return (\r\n      <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\r\n        <DialogContent>\r\n          <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\r\n            <Typography color=\"error\">\r\n              Error: No se pudo cargar la información necesaria para el movimiento interno.\r\n            </Typography>\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      rack: '',\r\n      fila: '',\r\n      nivel: '',\r\n      pasillo: '',\r\n      unidades: item?.unidades || 0,\r\n      kilos: item?.kilos || 0\r\n    });\r\n    setErrors({});\r\n    setLocationType('rack');\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n    \r\n    if (errors[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleLocationTypeChange = (type) => {\r\n    setLocationType(type);\r\n    if (type === 'rack') {\r\n      setFormData(prev => ({ ...prev, pasillo: '' }));\r\n    } else {\r\n      setFormData(prev => ({ ...prev, rack: '', fila: '', nivel: '' }));\r\n    }\r\n  };\r\n\r\n  const isLocationSelected = () => {\r\n    if (locationType === 'rack') {\r\n      return formData.rack && formData.fila && formData.nivel;\r\n    } else {\r\n      return formData.pasillo;\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    \r\n    if (!isLocationSelected()) {\r\n      newErrors.location = 'Debe seleccionar una ubicación de destino';\r\n    }\r\n    \r\n    const unidadesSolicitadas = parseInt(formData.unidades);\r\n    const kilosSolicitados = parseFloat(formData.kilos);\r\n    \r\n    if (!formData.unidades || unidadesSolicitadas <= 0) {\r\n      newErrors.unidades = 'Debe ingresar unidades válidas';\r\n    } else if (item && item.unidades && unidadesSolicitadas > item.unidades) {\r\n      newErrors.unidades = `Máximo disponible: ${item.unidades} unidades`;\r\n    }\r\n    \r\n    if (!formData.kilos || kilosSolicitados <= 0) {\r\n      newErrors.kilos = 'Debe ingresar kilos válidos';\r\n    } else if (item && item.kilos && kilosSolicitados > item.kilos) {\r\n      newErrors.kilos = `Máximo disponible: ${item.kilos.toFixed(2)} kg`;\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (validateForm()) {\r\n      const selectedItem = {\r\n        itemId: item?.itemId || item?.categoria,\r\n        categoria: item?.categoria || '',\r\n        descripcion: item?.descripcion || '',\r\n        proveedor: item?.proveedor || null,\r\n        partida: item?.partida || '',\r\n        kilos: parseFloat(formData.kilos),\r\n        unidades: parseInt(formData.unidades)\r\n      };\r\n\r\n      const data = locationType === 'pasillo' ? \r\n        { pasillo: parseInt(formData.pasillo) } : \r\n        { \r\n          rack: parseInt(formData.rack), \r\n          fila: parseInt(formData.fila), \r\n          nivel: formData.nivel \r\n        };\r\n      \r\n      const submitData = {\r\n        selectedItem,\r\n        data,\r\n        id: posicionOrigen?.posicionId || posicionOrigen?.rack || posicionOrigen?.pasillo\r\n      };\r\n      \r\n      onSubmit(submitData);\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    resetForm();\r\n    onClose();\r\n  };\r\n\r\n  const handleCantidadChange = (e) => {\r\n    const value = parseInt(e.target.value);\r\n    if (item && item.unidades && item.kilos) {\r\n      const newKilos = Math.round((item.kilos / item.unidades) * value * 100) / 100;\r\n      const maxKilos = Math.min(newKilos, item.kilos);\r\n      const maxUnidades = Math.min(value, item.unidades);\r\n\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        kilos: maxKilos,\r\n        unidades: maxUnidades\r\n      }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog \r\n      open={open} \r\n      onClose={handleClose}\r\n      maxWidth=\"md\"\r\n      fullWidth\r\n      PaperProps={{\r\n        sx: {\r\n          borderRadius: 'var(--border-radius-lg)',\r\n          boxShadow: 'var(--shadow-lg)'\r\n        }\r\n      }}\r\n    >\r\n      {/* Header con icono y título */}\r\n      <DialogTitle sx={{ \r\n        display: 'flex', \r\n        alignItems: 'center', \r\n        justifyContent: 'space-between',\r\n        pb: 1\r\n      }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n          <SwapIcon sx={{ color: 'var(--color-secondary)', fontSize: 28 }} />\r\n          <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\r\n            Mover Stock\r\n          </Typography>\r\n        </Box>\r\n        <IconButton onClick={handleClose} size=\"small\">\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n      \r\n      <DialogContent sx={{ p: 3 }}>\r\n        <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\r\n          \r\n          {/* Información del item */}\r\n          <ModernCard\r\n            title=\"Material a Mover\"\r\n            subtitle=\"Información del stock disponible\"\r\n            padding=\"compact\"\r\n            sx={{ mb: 0 }}\r\n          >\r\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                <InventoryIcon sx={{ color: 'var(--color-primary)', fontSize: 20 }} />\r\n                <Typography variant=\"body1\" sx={{ fontWeight: 600 }}>\r\n                  {item?.categoria} - {item?.descripcion}\r\n                </Typography>\r\n              </Box>\r\n              \r\n              <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n                <Chip \r\n                  label={`${item?.unidades || 0} unidades`} \r\n                  color=\"primary\" \r\n                  size=\"small\" \r\n                  variant=\"outlined\"\r\n                />\r\n                <Chip \r\n                  label={`${(item?.kilos || 0).toFixed(2)} kg`} \r\n                  color=\"secondary\" \r\n                  size=\"small\" \r\n                  variant=\"outlined\"\r\n                />\r\n                {item?.partida && (\r\n                  <Chip \r\n                    label={`P: ${item.partida}`} \r\n                    color=\"default\" \r\n                    size=\"small\" \r\n                    variant=\"outlined\"\r\n                  />\r\n                )}\r\n              </Box>\r\n            </Box>\r\n          </ModernCard>\r\n\r\n          {/* Ubicación de destino */}\r\n          <ModernCard\r\n            title=\"Destino\"\r\n            subtitle=\"Seleccione la nueva ubicación\"\r\n            padding=\"compact\"\r\n            sx={{ mb: 0 }}\r\n          >\r\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n              \r\n              {/* Selector de tipo de ubicación */}\r\n              <Box sx={{ display: 'flex', gap: 1 }}>\r\n                <Button\r\n                  variant={locationType === 'rack' ? 'contained' : 'outlined'}\r\n                  size=\"small\"\r\n                  onClick={() => handleLocationTypeChange('rack')}\r\n                  sx={{ \r\n                    flex: 1,\r\n                    backgroundColor: locationType === 'rack' ? 'var(--color-primary)' : 'transparent'\r\n                  }}\r\n                >\r\n                  Rack/Fila/Nivel\r\n                </Button>\r\n                <Button\r\n                  variant={locationType === 'pasillo' ? 'contained' : 'outlined'}\r\n                  size=\"small\"\r\n                  onClick={() => handleLocationTypeChange('pasillo')}\r\n                  sx={{ \r\n                    flex: 1,\r\n                    backgroundColor: locationType === 'pasillo' ? 'var(--color-primary)' : 'transparent'\r\n                  }}\r\n                >\r\n                  Pasillo\r\n                </Button>\r\n              </Box>\r\n\r\n              {/* Campos de ubicación */}\r\n              {locationType === 'rack' ? (\r\n                <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap' }}>\r\n                  <FormControl size=\"small\" sx={{ minWidth: 100, flex: 1 }}>\r\n                    <InputLabel>Rack</InputLabel>\r\n                    <Select\r\n                      value={formData.rack}\r\n                      onChange={(e) => handleInputChange('rack', e.target.value)}\r\n                      label=\"Rack\"\r\n                    >\r\n                      {[...Array(20)].map((_, i) => (\r\n                        <MenuItem key={i + 1} value={i + 1}>R{i + 1}</MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  </FormControl>\r\n                  \r\n                  <FormControl size=\"small\" sx={{ minWidth: 100, flex: 1 }}>\r\n                    <InputLabel>Fila</InputLabel>\r\n                    <Select\r\n                      value={formData.fila}\r\n                      onChange={(e) => handleInputChange('fila', e.target.value)}\r\n                      label=\"Fila\"\r\n                    >\r\n                      {[...Array(14)].map((_, i) => (\r\n                        <MenuItem key={i + 1} value={i + 1}>F{i + 1}</MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  </FormControl>\r\n                  \r\n                  <FormControl size=\"small\" sx={{ minWidth: 100, flex: 1 }}>\r\n                    <InputLabel>Nivel</InputLabel>\r\n                    <Select\r\n                      value={formData.nivel}\r\n                      onChange={(e) => handleInputChange('nivel', e.target.value)}\r\n                      label=\"Nivel\"\r\n                    >\r\n                      {['A', 'B'].map((option) => (\r\n                        <MenuItem key={option} value={option}>{option}</MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  </FormControl>\r\n                </Box>\r\n              ) : (\r\n                <FormControl size=\"small\" fullWidth>\r\n                  <InputLabel>Pasillo</InputLabel>\r\n                  <Select\r\n                    value={formData.pasillo}\r\n                    onChange={(e) => handleInputChange('pasillo', e.target.value)}\r\n                    label=\"Pasillo\"\r\n                  >\r\n                    {[...Array(12)].map((_, i) => (\r\n                      <MenuItem key={i} value={i}>Pasillo {i}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              )}\r\n\r\n              {errors.location && (\r\n                <Alert severity=\"error\" sx={{ mt: 1 }}>{errors.location}</Alert>\r\n              )}\r\n            </Box>\r\n          </ModernCard>\r\n\r\n          {/* Cantidad a mover */}\r\n          <ModernCard\r\n            title=\"Cantidad\"\r\n            subtitle=\"Especifique cuánto stock mover\"\r\n            padding=\"compact\"\r\n            sx={{ mb: 0 }}\r\n          >\r\n            <TextField\r\n              fullWidth\r\n              label=\"Unidades a mover\"\r\n              type=\"number\"\r\n              value={formData.unidades}\r\n              onChange={handleCantidadChange}\r\n              error={!!errors.unidades}\r\n              helperText={errors.unidades || `Máximo: ${item?.unidades || 0} unidades`}\r\n              inputProps={{ \r\n                min: 1, \r\n                max: item?.unidades || 1,\r\n                step: 1\r\n              }}\r\n              sx={{ mb: 2 }}\r\n            />\r\n\r\n            <TextField\r\n              fullWidth\r\n              label=\"Kilos a mover\"\r\n              type=\"number\"\r\n              value={formData.kilos}\r\n              onChange={(e) => handleInputChange('kilos', e.target.value)}\r\n              error={!!errors.kilos}\r\n              helperText={errors.kilos || `Máximo: ${(item?.kilos || 0).toFixed(2)} kg`}\r\n              inputProps={{ \r\n                min: 0.01,\r\n                max: item?.kilos || 0,\r\n                step: 0.01\r\n              }}\r\n            />\r\n          </ModernCard>\r\n        </Box>\r\n      </DialogContent>\r\n      \r\n      <DialogActions sx={{ p: 3, pt: 0 }}>\r\n        <Button \r\n          onClick={handleClose} \r\n          variant=\"outlined\"\r\n          sx={{ color: 'var(--color-text-secondary)' }}\r\n        >\r\n          Cancelar\r\n        </Button>\r\n        <Button \r\n          onClick={handleSubmit} \r\n          variant=\"contained\" \r\n          sx={{ \r\n            backgroundColor: 'var(--color-secondary)',\r\n            '&:hover': {\r\n              backgroundColor: 'var(--color-secondary-dark)'\r\n            }\r\n          }}\r\n          disabled={!isLocationSelected()}\r\n          startIcon={<SwapIcon />}\r\n        >\r\n          Mover Stock\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}; ","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Dialog, \r\n  DialogTitle, \r\n  DialogContent, \r\n  DialogActions, \r\n  Button, \r\n  TextField, \r\n  Box,\r\n  Typography,\r\n  Alert,\r\n  Chip,\r\n  useTheme,\r\n  useMediaQuery,\r\n  IconButton,\r\n  Slider\r\n} from '@mui/material';\r\nimport { \r\n  Edit as EditIcon,\r\n  Warning as WarningIcon,\r\n  Close as CloseIcon,\r\n  Inventory as InventoryIcon\r\n} from '@mui/icons-material';\r\nimport { generatePosicionTitle } from '../../../features/stock/utils/posicionUtils';\r\nimport ModernCard from '../../../shared/ui/ModernCard/ModernCard';\r\n\r\nexport const CorreccionForm = ({ \r\n  open, \r\n  onClose, \r\n  item,\r\n  posicion,\r\n  onSubmit \r\n}) => {\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\r\n  \r\n  const [formData, setFormData] = useState({\r\n    kilos: '',\r\n    unidades: ''\r\n  });\r\n  \r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (open && item) {\r\n      resetForm();\r\n    }\r\n  }, [open, item]);\r\n  \r\n  useEffect(() => {\r\n    if (open && (!item || !posicion)) {\r\n      const timer = setTimeout(() => {\r\n        onClose();\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [open, item, posicion, onClose]);\r\n\r\n  if (!open) return null;\r\n  \r\n  if (!item || !posicion) {\r\n    return (\r\n      <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\r\n        <DialogContent>\r\n          <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\r\n            <Typography color=\"error\">\r\n              Error: No se pudo cargar la información necesaria para la corrección.\r\n            </Typography>\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      kilos: '',\r\n      unidades: ''\r\n    });\r\n    setErrors({});\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n    \r\n    if (errors[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSliderChange = (field, value) => {\r\n    const maxValue = field === 'kilos' ? item?.kilos || 0 : item?.unidades || 0;\r\n    const percentage = value / 100;\r\n    const newValue = Math.round(maxValue * percentage * 100) / 100;\r\n    \r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: newValue.toString()\r\n    }));\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    \r\n    const nuevosKilos = parseFloat(formData.kilos);\r\n    const nuevasUnidades = parseInt(formData.unidades);\r\n    \r\n    if (!formData.kilos || nuevosKilos < 0) {\r\n      newErrors.kilos = 'Debe ingresar kilos válidos (mínimo 0)';\r\n    }\r\n    \r\n    if (!formData.unidades || nuevasUnidades < 0) {\r\n      newErrors.unidades = 'Debe ingresar unidades válidas (mínimo 0)';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (validateForm()) {\r\n      const kilosAEliminar = parseFloat(formData.kilos);\r\n      const unidadesAEliminar = parseInt(formData.unidades);\r\n      \r\n      if (kilosAEliminar > (item?.kilos || 0)) {\r\n        setErrors({ kilos: `No puede eliminar más de ${item?.kilos || 0} kilos disponibles` });\r\n        return;\r\n      }\r\n      \r\n      if (unidadesAEliminar > (item?.unidades || 0)) {\r\n        setErrors({ unidades: `No puede eliminar más de ${item?.unidades || 0} unidades disponibles` });\r\n        return;\r\n      }\r\n      \r\n      const submitData = {\r\n        proveedor: item?.proveedor,\r\n        tipoMovimiento: 'ajusteRESTA',\r\n        item: {\r\n          itemId: item?.itemId || item?.id,\r\n          categoria: item?.categoria,\r\n          descripcion: item?.descripcion,\r\n          proveedor: item?.proveedor,\r\n          partida: item?.partida,\r\n          kilos: item?.kilos,\r\n          unidades: item?.unidades\r\n        },\r\n        kilos: kilosAEliminar,\r\n        unidades: unidadesAEliminar,\r\n        partida: item?.partida,\r\n        posicion: posicion?.posicionId || posicion?.id || ''\r\n      };\r\n      \r\n      onSubmit(submitData);\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    resetForm();\r\n    onClose();\r\n  };\r\n\r\n  const handleEliminarTodo = () => {\r\n    setFormData({\r\n      kilos: (item?.kilos || 0).toString(),\r\n      unidades: (item?.unidades || 0).toString()\r\n    });\r\n  };\r\n\r\n  const kilosPercentage = formData.kilos ? (parseFloat(formData.kilos) / (item?.kilos || 1)) * 100 : 0;\r\n  const unidadesPercentage = formData.unidades ? (parseInt(formData.unidades) / (item?.unidades || 1)) * 100 : 0;\r\n\r\n  return (\r\n    <Dialog \r\n      open={open} \r\n      onClose={handleClose}\r\n      maxWidth=\"md\"\r\n      fullWidth\r\n      PaperProps={{\r\n        sx: {\r\n          borderRadius: 'var(--border-radius-lg)',\r\n          boxShadow: 'var(--shadow-lg)'\r\n        }\r\n      }}\r\n    >\r\n      {/* Header con icono y título */}\r\n      <DialogTitle sx={{ \r\n        display: 'flex', \r\n        alignItems: 'center', \r\n        justifyContent: 'space-between',\r\n        pb: 1\r\n      }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n          <EditIcon sx={{ color: 'var(--color-warning)', fontSize: 28 }} />\r\n          <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\r\n            Ajustar Stock\r\n          </Typography>\r\n        </Box>\r\n        <IconButton onClick={handleClose} size=\"small\">\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n      \r\n      <DialogContent sx={{ p: 3 }}>\r\n        <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\r\n          \r\n          {/* Información del item */}\r\n          <ModernCard\r\n            title=\"Material a Ajustar\"\r\n            subtitle=\"Información del stock actual\"\r\n            padding=\"compact\"\r\n            sx={{ mb: 0 }}\r\n          >\r\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                <InventoryIcon sx={{ color: 'var(--color-primary)', fontSize: 20 }} />\r\n                <Typography variant=\"body1\" sx={{ fontWeight: 600 }}>\r\n                  {item?.categoria} - {item?.descripcion}\r\n                </Typography>\r\n              </Box>\r\n              \r\n              <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n                <Chip \r\n                  label={`${item?.unidades || 0} unidades`} \r\n                  color=\"primary\" \r\n                  size=\"small\" \r\n                  variant=\"outlined\"\r\n                />\r\n                <Chip \r\n                  label={`${(item?.kilos || 0).toFixed(2)} kg`} \r\n                  color=\"secondary\" \r\n                  size=\"small\" \r\n                  variant=\"outlined\"\r\n                />\r\n                {item?.partida && (\r\n                  <Chip \r\n                    label={`P: ${item.partida}`} \r\n                    color=\"default\" \r\n                    size=\"small\" \r\n                    variant=\"outlined\"\r\n                  />\r\n                )}\r\n              </Box>\r\n            </Box>\r\n          </ModernCard>\r\n\r\n          {/* Cantidad a eliminar */}\r\n          <ModernCard\r\n            title=\"Cantidad a Eliminar\"\r\n            subtitle=\"Especifique cuánto stock eliminar\"\r\n            padding=\"compact\"\r\n            sx={{ mb: 0 }}\r\n          >\r\n            <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\r\n              \r\n              {/* Kilos */}\r\n              <Box>\r\n                <Typography variant=\"body2\" sx={{ mb: 1, fontWeight: 500 }}>\r\n                  Kilos a eliminar: {formData.kilos || 0} kg\r\n                </Typography>\r\n                <Slider\r\n                  value={kilosPercentage}\r\n                  onChange={(_, value) => handleSliderChange('kilos', value)}\r\n                  min={0}\r\n                  max={100}\r\n                  step={1}\r\n                  valueLabelDisplay=\"auto\"\r\n                  valueLabelFormat={(value) => `${Math.round((item?.kilos || 0) * value / 100)} kg`}\r\n                  sx={{\r\n                    color: 'var(--color-warning)',\r\n                    '& .MuiSlider-thumb': {\r\n                      backgroundColor: 'var(--color-warning)'\r\n                    }\r\n                  }}\r\n                />\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"Kilos específicos\"\r\n                  type=\"number\"\r\n                  value={formData.kilos}\r\n                  onChange={(e) => handleInputChange('kilos', e.target.value)}\r\n                  error={!!errors.kilos}\r\n                  helperText={errors.kilos || `Máximo: ${item?.kilos || 0} kg`}\r\n                  inputProps={{ \r\n                    min: 0,\r\n                    max: item?.kilos || 0,\r\n                    step: 0.01\r\n                  }}\r\n                  size=\"small\"\r\n                />\r\n              </Box>\r\n\r\n              {/* Unidades */}\r\n              <Box>\r\n                <Typography variant=\"body2\" sx={{ mb: 1, fontWeight: 500 }}>\r\n                  Unidades a eliminar: {formData.unidades || 0} uds\r\n                </Typography>\r\n                <Slider\r\n                  value={unidadesPercentage}\r\n                  onChange={(_, value) => handleSliderChange('unidades', value)}\r\n                  min={0}\r\n                  max={100}\r\n                  step={1}\r\n                  valueLabelDisplay=\"auto\"\r\n                  valueLabelFormat={(value) => `${Math.round((item?.unidades || 0) * value / 100)} uds`}\r\n                  sx={{\r\n                    color: 'var(--color-warning)',\r\n                    '& .MuiSlider-thumb': {\r\n                      backgroundColor: 'var(--color-warning)'\r\n                    }\r\n                  }}\r\n                />\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"Unidades específicas\"\r\n                  type=\"number\"\r\n                  value={formData.unidades}\r\n                  onChange={(e) => handleInputChange('unidades', e.target.value)}\r\n                  error={!!errors.unidades}\r\n                  helperText={errors.unidades || `Máximo: ${item?.unidades || 0} unidades`}\r\n                  inputProps={{ \r\n                    min: 0,\r\n                    max: item?.unidades || 0,\r\n                    step: 1\r\n                  }}\r\n                  size=\"small\"\r\n                />\r\n              </Box>\r\n\r\n              {/* Botón para eliminar todo */}\r\n              <Button\r\n                variant=\"outlined\"\r\n                color=\"warning\"\r\n                fullWidth\r\n                onClick={handleEliminarTodo}\r\n                startIcon={<WarningIcon />}\r\n                sx={{ \r\n                  borderColor: 'var(--color-warning)',\r\n                  color: 'var(--color-warning)',\r\n                  '&:hover': {\r\n                    backgroundColor: 'var(--color-warning)',\r\n                    color: 'white'\r\n                  }\r\n                }}\r\n              >\r\n                Eliminar todo el stock disponible\r\n              </Button>\r\n            </Box>\r\n          </ModernCard>\r\n\r\n          {/* Advertencia */}\r\n          <Alert \r\n            severity=\"warning\" \r\n            icon={<WarningIcon />}\r\n            sx={{ \r\n              backgroundColor: 'rgba(255, 152, 0, 0.1)',\r\n              border: '1px solid var(--color-warning)'\r\n            }}\r\n          >\r\n            <Typography variant=\"body2\">\r\n              <strong>Advertencia:</strong> Esta acción eliminará permanentemente el stock seleccionado. \r\n              Esta operación no se puede deshacer.\r\n            </Typography>\r\n          </Alert>\r\n        </Box>\r\n      </DialogContent>\r\n      \r\n      <DialogActions sx={{ p: 3, pt: 0 }}>\r\n        <Button \r\n          onClick={handleClose} \r\n          variant=\"outlined\"\r\n          sx={{ color: 'var(--color-text-secondary)' }}\r\n        >\r\n          Cancelar\r\n        </Button>\r\n        <Button \r\n          onClick={handleSubmit} \r\n          variant=\"contained\" \r\n          sx={{ \r\n            backgroundColor: 'var(--color-warning)',\r\n            '&:hover': {\r\n              backgroundColor: 'var(--color-warning-dark)'\r\n            }\r\n          }}\r\n          disabled={isSubmitting || (!formData.kilos && !formData.unidades)}\r\n          startIcon={<EditIcon />}\r\n        >\r\n          {isSubmitting ? 'Eliminando...' : 'Eliminar Stock'}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}; ","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { \r\n  Box, \r\n  Typography, \r\n  Button, \r\n  Chip, \r\n  Container,\r\n  Grid,\r\n  useTheme,\r\n  useMediaQuery\r\n} from '@mui/material';\r\nimport { \r\n  Add as AddIcon,\r\n  Search as SearchIcon,\r\n  FilterList as FilterIcon\r\n} from '@mui/icons-material';\r\nimport { SearchBar } from '../../shared/ui/SearchBar/SearchBar';\r\nimport { AdvancedFilters } from '../../shared/ui/AdvancedFilters/AdvancedFilters';\r\nimport { PosicionList } from '../../widgets/PosicionList/PosicionList';\r\nimport { AdicionRapidaForm } from '../../widgets/remitos/AdicionRapidaForm/AdicionRapidaForm';\r\nimport { MovimientoInternoForm } from '../../widgets/remitos/MovimientoInternoForm/MovimientoInternoForm';\r\nimport { CorreccionForm } from '../../widgets/remitos/CorreccionForm/CorreccionForm';\r\nimport AppLayout from '../../shared/ui/AppLayout/AppLayout';\r\nimport ModernCard from '../../shared/ui/ModernCard/ModernCard';\r\nimport { fetchPosicionesConItems, adicionRapida, movimientoInterno } from '../../features/stock/model/slice';\r\nimport { selectPosiciones, selectStockLoading, selectStockError } from '../../features/stock/model/selectors';\r\nimport { applyAllFilters } from '../../features/stock/utils/posicionUtils';\r\nimport { getRoleColor, getRoleLabel } from '../../features/stock/utils/userUtils';\r\nimport { checkAuthentication, handleLogout } from '../../features/stock/utils/navigationUtils';\r\nimport { SEARCH_PLACEHOLDERS, ERROR_MESSAGES } from '../../features/stock/constants/stockConstants';\r\n\r\nexport const DepositoPage = () => {\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\r\n  const isTablet = useMediaQuery(theme.breakpoints.down('md'));\r\n  \r\n  const [user, setUser] = useState(null);\r\n  const [filteredPosiciones, setFilteredPosiciones] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [advancedFilters, setAdvancedFilters] = useState({\r\n    rack: '',\r\n    fila: '',\r\n    ab: '',\r\n    pasillo: ''\r\n  });\r\n  \r\n  // Estados para los formularios\r\n  const [adicionRapidaOpen, setAdicionRapidaOpen] = useState(false);\r\n  const [movimientoInternoOpen, setMovimientoInternoOpen] = useState(false);\r\n  const [correccionOpen, setCorreccionOpen] = useState(false);\r\n  const [selectedPosicion, setSelectedPosicion] = useState(null);\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n  \r\n  const posiciones = useSelector(selectPosiciones);\r\n  const isLoading = useSelector(selectStockLoading);\r\n  const error = useSelector(selectStockError);\r\n\r\n  useEffect(() => {\r\n    const currentUser = checkAuthentication(navigate);\r\n    if (currentUser) {\r\n      setUser(currentUser);\r\n    }\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchPosicionesConItems());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    const filtered = applyAllFilters(posiciones, searchTerm, advancedFilters);\r\n    setFilteredPosiciones(filtered);\r\n  }, [posiciones, searchTerm, advancedFilters]);\r\n\r\n  const handleLogoutClick = () => {\r\n    handleLogout(navigate);\r\n  };\r\n\r\n  const handleSearch = (searchTerm) => {\r\n    setSearchTerm(searchTerm);\r\n  };\r\n\r\n  const handleAdvancedFiltersChange = (newFilters) => {\r\n    setAdvancedFilters(newFilters);\r\n  };\r\n\r\n  const handlePosicionClick = (posicion) => {\r\n    console.log(\"Posición seleccionada:\", posicion);\r\n  };\r\n\r\n  const handleAdicionRapida = (posicion) => {\r\n    setSelectedPosicion(posicion);\r\n    setAdicionRapidaOpen(true);\r\n  };\r\n\r\n  const handleMovimientoInterno = (item, posicion) => {\r\n    console.log('Datos recibidos para movimiento interno:', { item, posicion });\r\n    if (item && posicion) {\r\n      setSelectedItem(item);\r\n      setSelectedPosicion(posicion);\r\n      setMovimientoInternoOpen(true);\r\n    } else {\r\n      console.error('Datos inválidos para movimiento interno:', { item, posicion });\r\n    }\r\n  };\r\n\r\n  const handleCorreccion = (item, posicion) => {\r\n    setSelectedItem(item);\r\n    setSelectedPosicion(posicion);\r\n    setCorreccionOpen(true);\r\n  };\r\n\r\n  const handleAdicionRapidaSubmit = async (data) => {\r\n    try {\r\n      await dispatch(adicionRapida(data)).unwrap();\r\n      setAdicionRapidaOpen(false);\r\n      setSelectedPosicion(null);\r\n    } catch (error) {\r\n      console.error('Error en adición rápida:', error);\r\n    }\r\n  };\r\n\r\n  const handleMovimientoInternoSubmit = async (data) => {\r\n    try {\r\n      await dispatch(movimientoInterno(data)).unwrap();\r\n      setMovimientoInternoOpen(false);\r\n      setSelectedItem(null);\r\n      setSelectedPosicion(null);\r\n    } catch (error) {\r\n      console.error('Error en movimiento interno:', error);\r\n    }\r\n  };\r\n\r\n  const handleCorreccionSubmit = async (data) => {\r\n    try {\r\n      // Implementar lógica de corrección\r\n      setCorreccionOpen(false);\r\n      setSelectedItem(null);\r\n      setSelectedPosicion(null);\r\n    } catch (error) {\r\n      console.error('Error en corrección:', error);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <AppLayout user={user} onLogout={handleLogoutClick} pageTitle=\"Depósito\">\r\n        <Container maxWidth=\"lg\" sx={{ py: isMobile ? 2 : 4 }}>\r\n          <Box sx={{ \r\n            display: 'flex', \r\n            flexDirection: 'column', \r\n            alignItems: 'center', \r\n            justifyContent: 'center',\r\n            minHeight: '60vh'\r\n          }}>\r\n            <Typography variant=\"h6\" sx={{ color: 'var(--color-text-secondary)', mb: 2 }}>\r\n              Cargando posiciones...\r\n            </Typography>\r\n          </Box>\r\n        </Container>\r\n      </AppLayout>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <AppLayout user={user} onLogout={handleLogoutClick} pageTitle=\"Depósito\">\r\n        <Container maxWidth=\"lg\" sx={{ py: isMobile ? 2 : 4 }}>\r\n          <ModernCard\r\n            title=\"Error\"\r\n            subtitle=\"No se pudieron cargar las posiciones\"\r\n            sx={{ maxWidth: 600, mx: 'auto' }}\r\n          >\r\n            <Typography color=\"error\" sx={{ mb: 3 }}>\r\n              {error}\r\n            </Typography>\r\n            <Button \r\n              variant=\"contained\" \r\n              onClick={() => dispatch(fetchPosicionesConItems())}\r\n              sx={{ backgroundColor: 'var(--color-primary)' }}\r\n            >\r\n              Reintentar\r\n            </Button>\r\n          </ModernCard>\r\n        </Container>\r\n      </AppLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AppLayout user={user} onLogout={handleLogoutClick} pageTitle=\"Depósito\">\r\n      <Container maxWidth=\"lg\" sx={{ py: isMobile ? 2 : 4 }}>\r\n        {/* Header solo en desktop */}\r\n        {!isMobile && (\r\n          <Box sx={{ mb: 4 }}>\r\n            <Typography \r\n              variant=\"h3\" \r\n              sx={{ \r\n                fontWeight: 700,\r\n                color: 'var(--color-text-primary)',\r\n                mb: 0.5\r\n              }}\r\n            >\r\n              Depósito\r\n            </Typography>\r\n            <Typography \r\n              variant=\"body2\" \r\n              sx={{ \r\n                color: 'var(--color-text-secondary)',\r\n                mb: 3\r\n              }}\r\n            >\r\n              {filteredPosiciones.length} de {posiciones.length} posiciones\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n\r\n        {/* Filtros compactos */}\r\n        <ModernCard\r\n          title={isMobile ? \"Filtros\" : \"Búsqueda y Filtros\"}\r\n          subtitle={isMobile ? \"\" : \"Encuentra rápidamente las posiciones que necesitas\"}\r\n          sx={{ mb: isMobile ? 2 : 4 }}\r\n          padding={isMobile ? \"compact\" : \"normal\"}\r\n        >\r\n          {/* Layout en una línea para todos los dispositivos */}\r\n          <Box sx={{ \r\n            display: 'flex', \r\n            flexDirection: 'row',\r\n            gap: isMobile ? 0.5 : isTablet ? 1 : 2,\r\n            alignItems: 'center',\r\n            overflow: 'hidden'\r\n          }}>\r\n            {/* Barra de búsqueda - 2/3 del espacio en móvil/tablet */}\r\n            <Box sx={{ \r\n              flex: isMobile || isTablet ? '0 0 66.666%' : '1',\r\n              minWidth: 0\r\n            }}>\r\n              <SearchBar \r\n                placeholder={SEARCH_PLACEHOLDERS.DEPOSITO}\r\n                onSearch={handleSearch}\r\n              />\r\n            </Box>\r\n            \r\n            {/* Filtros avanzados - 1/3 del espacio en móvil/tablet */}\r\n            <Box sx={{ \r\n              flex: isMobile || isTablet ? '0 0 33.333%' : '0 0 auto',\r\n              minWidth: isMobile ? '120px' : isTablet ? '140px' : '220px'\r\n            }}>\r\n              <AdvancedFilters \r\n                filters={advancedFilters}\r\n                onFilterChange={handleAdvancedFiltersChange}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </ModernCard>\r\n        \r\n        {/* Lista de Posiciones - Sin título en móvil para ahorrar espacio */}\r\n        <ModernCard\r\n          title={isMobile ? undefined : `Posiciones (${filteredPosiciones.length})`}\r\n          subtitle={isMobile ? undefined : `Mostrando ${filteredPosiciones.length} de ${posiciones.length} posiciones`}\r\n          headerAction={\r\n            !isMobile ? (\r\n              <Chip \r\n                label={`${posiciones.length} total`}\r\n                color=\"primary\"\r\n                size=\"small\"\r\n              />\r\n            ) : undefined\r\n          }\r\n          padding={isMobile ? \"compact\" : \"normal\"}\r\n        >\r\n          <PosicionList\r\n            posiciones={filteredPosiciones}\r\n            onPosicionClick={handlePosicionClick}\r\n            onAdicionRapida={handleAdicionRapida}\r\n            onMovimientoInterno={handleMovimientoInterno}\r\n            onCorreccion={handleCorreccion}\r\n            searchTerm={searchTerm}\r\n          />\r\n        </ModernCard>\r\n        \r\n        {/* Formularios */}\r\n        <AdicionRapidaForm\r\n          open={adicionRapidaOpen}\r\n          onClose={() => setAdicionRapidaOpen(false)}\r\n          posicion={selectedPosicion}\r\n          onSubmit={handleAdicionRapidaSubmit}\r\n        />\r\n        \r\n        <MovimientoInternoForm\r\n          open={movimientoInternoOpen}\r\n          onClose={() => {\r\n            setMovimientoInternoOpen(false);\r\n            setSelectedItem(null);\r\n            setSelectedPosicion(null);\r\n          }}\r\n          item={selectedItem}\r\n          posicionOrigen={selectedPosicion}\r\n          onSubmit={handleMovimientoInternoSubmit}\r\n        />\r\n        \r\n        <CorreccionForm\r\n          open={correccionOpen}\r\n          onClose={() => {\r\n            setCorreccionOpen(false);\r\n            setSelectedItem(null);\r\n            setSelectedPosicion(null);\r\n          }}\r\n          item={selectedItem}\r\n          posicion={selectedPosicion}\r\n          onSubmit={handleCorreccionSubmit}\r\n        />\r\n      </Container>\r\n    </AppLayout>\r\n  );\r\n}; ","import { authService } from '../../../services/authService';\r\n\r\n/**\r\n * Verifica si el usuario está autenticado y redirige si es necesario\r\n * @param {Function} navigate - Función de navegación de React Router\r\n * @returns {Object|null} - Usuario actual o null si no está autenticado\r\n */\r\nexport const checkAuthentication = (navigate) => {\r\n  const currentUser = authService.getUser();\r\n  if (!currentUser) {\r\n    navigate('/');\r\n    return null;\r\n  }\r\n  return currentUser;\r\n};\r\n\r\n/**\r\n * Maneja el logout del usuario\r\n * @param {Function} navigate - Función de navegación de React Router\r\n */\r\nexport const handleLogout = (navigate) => {\r\n  authService.logout();\r\n  navigate('/');\r\n}; "],"names":["PosicionCard","React","_ref","posicion","onClick","onAdicionRapida","onMovimientoInterno","onCorreccion","searchTerm","children","isExpanded","setIsExpanded","useState","theme","useTheme","isMobile","useMediaQuery","breakpoints","down","titulo","generatePosicionTitle","filteredItems","useMemo","trim","items","searchWords","toLowerCase","split","filter","item","_item$proveedor","searchableText","categoria","descripcion","partida","proveedor","nombre","join","every","word","includes","handleMovimientoInterno","reduce","sum","kilos","unidades","e","stopPropagation","handleCorreccion","hasMoreItems","length","_jsxs","Box","sx","backgroundColor","borderRadius","border","p","mb","cursor","transition","boxShadow","transform","display","justifyContent","alignItems","_jsx","Typography","variant","fontWeight","color","flex","gap","IconButton","size","AddIcon","fontSize","ExpandLessIcon","ExpandMoreIcon","slice","map","index","_item$proveedor2","_item$kilos","py","borderBottom","minWidth","lineHeight","component","concat","toFixed","ml","mt","SwapIcon","EditIcon","Collapse","in","_item$proveedor3","_item$kilos2","PosicionList","posiciones","onPosicionClick","textAlign","flexDirection","uniqueKey","posicionId","URL","CATEGORIAS","ModalNuevoProveedor","open","onClose","onProveedorCreado","nombreProveedor","setNombreProveedor","loading","setLoading","Dialog","DialogTitle","DialogContent","TextField","autoFocus","margin","label","type","fullWidth","value","onChange","target","DialogActions","Button","async","response","axios","post","data","error","alert","console","disabled","ModalNuevoItem","_ref2","onItemCreado","nuevoItem","setNuevoItem","FormControl","InputLabel","Select","cat","MenuItem","required","AdicionRapidaForm","_ref3","onSubmit","dispatch","useDispatch","proveedores","useSelector","state","remitos","allItems","formData","setFormData","tipoMovimiento","setError","openNuevoProveedor","setOpenNuevoProveedor","openNuevoItem","setOpenNuevoItem","itemsProveedor","id","useEffect","dataProveedoresItems","handleInputChange","field","prev","handleClose","_Fragment","maxWidth","pasillo","rack","fila","AB","Alert","severity","Autocomplete","options","getOptionLabel","option","event","newValue","renderInput","params","placeholder","renderOption","props","noOptionsText","loadingText","filterOptions","_ref4","inputValue","alignSelf","textTransform","_ref5","inputProps","step","min","test","adicionData","itemId","parseInt","nuevoProveedor","MovimientoInternoForm","posicionOrigen","nivel","errors","setErrors","locationType","setLocationType","resetForm","timer","setTimeout","clearTimeout","handleLocationTypeChange","isLocationSelected","PaperProps","pb","CloseIcon","ModernCard","title","subtitle","padding","InventoryIcon","flexWrap","Chip","Array","_","i","location","newKilos","Math","round","maxKilos","maxUnidades","helperText","max","pt","handleSubmit","validateForm","newErrors","unidadesSolicitadas","kilosSolicitados","parseFloat","Object","keys","submitData","selectedItem","startIcon","CorreccionForm","isSubmitting","setIsSubmitting","handleSliderChange","maxValue","percentage","toString","kilosPercentage","unidadesPercentage","Slider","valueLabelDisplay","valueLabelFormat","handleEliminarTodo","WarningIcon","borderColor","icon","nuevosKilos","nuevasUnidades","kilosAEliminar","unidadesAEliminar","DepositoPage","navigate","useNavigate","isTablet","user","setUser","filteredPosiciones","setFilteredPosiciones","setSearchTerm","advancedFilters","setAdvancedFilters","ab","adicionRapidaOpen","setAdicionRapidaOpen","movimientoInternoOpen","setMovimientoInternoOpen","correccionOpen","setCorreccionOpen","selectedPosicion","setSelectedPosicion","setSelectedItem","selectPosiciones","isLoading","selectStockLoading","selectStockError","currentUser","authService","getUser","checkAuthentication","fetchPosicionesConItems","filtered","applyAllFilters","handleLogoutClick","logout","handleLogout","AppLayout","onLogout","pageTitle","Container","minHeight","mx","overflow","SearchBar","SEARCH_PLACEHOLDERS","DEPOSITO","onSearch","AdvancedFilters","filters","onFilterChange","newFilters","undefined","headerAction","log","adicionRapida","unwrap","movimientoInterno"],"sourceRoot":""}